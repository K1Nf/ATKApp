import{r as c,j as e,S,c as k,R as y}from"./Sidebar-chunk.js";const C=()=>{const[i,t]=c.useState(""),[s,l]=c.useState(""),d=n=>t(n.target.value),r=n=>l(n.target.value);return e.jsxs("header",{className:"control-panel",children:[e.jsx("input",{type:"text",placeholder:"Поиск мероприятий...",value:i,onChange:d}),e.jsxs("select",{value:s,onChange:r,children:[e.jsx("option",{value:"",children:"Фильтрация по статусу"}),e.jsx("option",{value:"active",children:"Важные"}),e.jsx("option",{value:"closed",children:"Сборник лучших практик"})]}),e.jsx("button",{type:"button",onClick:()=>window.location.href="/create",children:"Создать мероприятие"})]})};function v({itemsPerPage:i=10,children:t}){const[s,l]=c.useState([]),[d,r]=c.useState(!0),[n,a]=c.useState(null),[o,x]=c.useState(1);c.useEffect(()=>{(async()=>{const f="/api/ref/events";try{const h=await fetch(f);if(!h.ok)throw new Error("Ошибка при загрузке данных");const m=await h.json();l(m)}catch(h){a(h.message)}finally{r(!1)}})()},[]);const u=Math.ceil(s.length/i),j=o*i,p=j-i,b=s.slice(p,j);return t(d?{loading:!0}:n?{error:n}:{events:b,currentPage:o,setCurrentPage:x,totalPages:u,loading:!1,error:null})}const E=()=>e.jsx("div",{className:"table-container",children:e.jsx(v,{itemsPerPage:10,children:({events:i,currentPage:t,setCurrentPage:s,totalPages:l,loading:d,error:r})=>d?e.jsx("table",{children:e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{colSpan:"10",children:"Загрузка данных c сервера..."})})})}):r?e.jsx("table",{children:e.jsx("tbody",{children:e.jsx("tr",{children:e.jsxs("td",{colSpan:"10",children:["Ошибка: ",r]})})})}):e.jsxs(e.Fragment,{children:[e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"№ темы"}),e.jsx("th",{children:"Наименование"}),e.jsx("th",{children:"Описание"}),e.jsx("th",{children:"Дата"}),e.jsx("th",{children:"Количество участников"}),e.jsx("th",{children:"Ссылки"}),e.jsx("th",{children:"Управление"})]})}),e.jsx("tbody",{children:i.map(n=>{var a;return e.jsxs("tr",{children:[e.jsx("td",{children:n.themeCode??"—"}),e.jsx("td",{children:n.name??"—"}),e.jsx("td",{children:n.content??"—"}),e.jsx("td",{children:n.date??"—"}),e.jsx("td",{children:n.participantsCount??0}),e.jsx("td",{children:((a=n.links)==null?void 0:a.length)>0?n.links.map((o,x)=>e.jsx("div",{children:e.jsx("a",{href:o,target:"_blank",rel:"noopener noreferrer",children:o})},x)):"—"}),e.jsx("td",{children:e.jsx("button",{className:"details-btn",onClick:()=>window.location.href=`/events/${n.id}`,children:"Подробнее"})})]},n.id)})})]}),e.jsxs("div",{className:"pagination",children:[e.jsx("button",{onClick:()=>s(n=>Math.max(n-1,1)),disabled:t===1,children:"◀"}),t>2&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>s(1),children:"1"}),t>3&&e.jsx("span",{children:"..."})]}),t>1&&e.jsx("button",{onClick:()=>s(t-1),children:t-1}),e.jsx("button",{className:"active",children:t}),t<l&&e.jsx("button",{onClick:()=>s(t+1),children:t+1}),t<l-1&&e.jsxs(e.Fragment,{children:[t<l-2&&e.jsx("span",{children:"..."}),e.jsx("button",{onClick:()=>s(l),children:l})]}),e.jsx("button",{onClick:()=>s(n=>Math.min(n+1,l)),disabled:t===l,children:"▶"})]})]})})});function w(){const[i,t]=c.useState(!1),s=()=>t(!i);return e.jsxs("div",{className:"App",children:[e.jsx(S,{isOpen:i,toggleSidebar:s}),e.jsx(C,{}),e.jsx(E,{})]})}const F=document.getElementById("root"),N=k.createRoot(F);N.render(e.jsxs(y.StrictMode,{children:[e.jsx(w,{})," "]}));
