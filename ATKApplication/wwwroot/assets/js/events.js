import{r as s,j as e,S as x,c as j,R as u}from"./Sidebar-chunk.js";const p=()=>{const[n,r]=s.useState(""),[c,i]=s.useState(""),a=t=>r(t.target.value),o=t=>i(t.target.value);return e.jsxs("header",{className:"control-panel",children:[e.jsx("input",{type:"text",placeholder:"Поиск мероприятий...",value:n,onChange:a}),e.jsxs("select",{value:c,onChange:o,children:[e.jsx("option",{value:"",children:"Фильтрация по статусу"}),e.jsx("option",{value:"active",children:"Активные"}),e.jsx("option",{value:"closed",children:"Завершенные"})]}),e.jsx("button",{type:"button",onClick:()=>window.location.href="/create",children:"Создать мероприятие"})]})};function f(){const[n,r]=s.useState([]),[c,i]=s.useState(!0),[a,o]=s.useState(null);return s.useEffect(()=>{(async()=>{const d="/api/ref/events";try{const l=await fetch(d);if(!l.ok)throw new Error("Ошибка при загрузке данных");const h=await l.json();r(h)}catch(l){o(l.message)}finally{i(!1)}})()},[]),c?e.jsx("tr",{children:e.jsx("td",{colSpan:"10",children:"Загрузка данных c сервера..."})}):a?e.jsx("tr",{children:e.jsxs("td",{colSpan:"10",children:["Ошибка: ",a]})}):e.jsx(e.Fragment,{children:n.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.themeCode}),e.jsx("td",{children:t.name}),e.jsx("td",{children:t.content}),e.jsx("td",{children:t.date}),e.jsx("td",{children:t.participantsCount}),e.jsx("td",{children:t.links.map(d=>e.jsx("h3",{children:d}))}),e.jsx("td",{children:e.jsx("button",{className:"details-btn",onClick:()=>window.location.href=`/events/${t.id}`,children:"Подробнее"})})]},t.id))})}const m=()=>e.jsx("div",{className:"table-container",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"№ темы"}),e.jsx("th",{children:"Наименование"}),e.jsx("th",{children:"Описание"}),e.jsx("th",{children:"Дата"}),e.jsx("th",{children:"Количество участников"}),e.jsx("th",{children:"Ссылки"}),e.jsx("th",{children:"Управление"})]})}),e.jsx("tbody",{children:e.jsx(f,{})})]})});function S(){const[n,r]=s.useState(!1),c=()=>r(!n);return e.jsxs("div",{className:"App",children:[e.jsx(x,{isOpen:n,toggleSidebar:c}),e.jsx(p,{}),e.jsx(m,{})]})}const g=document.getElementById("root"),b=j.createRoot(g);b.render(e.jsxs(u.StrictMode,{children:[e.jsx(S,{})," "]}));
