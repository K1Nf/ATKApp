import{j as e,r as c,S as w,c as v}from"./Sidebar-chunk.js";import{t as B}from"./toastr.min-chunk.js";const C=({isOpen:i,onConfirm:l,onCancel:t})=>i?e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("h2",{children:"Подтверждение удаления"}),e.jsx("p",{children:"Вы уверены, что хотите удалить?"}),e.jsxs("div",{className:"modal-buttons",children:[e.jsx("button",{className:"confirm-del-btn",onClick:l,children:"Удалить"}),e.jsx("button",{className:"confirm-cancel-btn",onClick:t,children:"Отмена"})]})]})}):null,E=()=>{var h,x,j,p,b;const[i,l]=c.useState(!1),t=async()=>{let n="/api/ref/events/delete/"+s.id;try{const r=await fetch(n,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!r.ok)throw new Error("Ошибка при удалении события");if(r.status==204){const g=await r.text();B.success("Мероприятие успешно удалено из системы!","Удалено"),setTimeout(()=>{window.location.href="/events"},3e3)}}catch(r){console.error("Ошибка:",r)}l(!1)},[s,u]=c.useState(null),[m,f]=c.useState(!0),[d,k]=c.useState(null),o=window.location.pathname.split("/"),a=o[o.length-1],y=`/api/ref/events/${a}`;return c.useEffect(()=>{(async()=>{try{const r=await fetch(y);if(!r.ok)throw new Error("Ошибка загрузки данных");const g=await r.json();u(g)}catch(r){k(r.message)}finally{f(!1)}})()},[a]),m?e.jsx("p",{children:"Загрузка..."}):d?e.jsxs("p",{children:["Ошибка: ",d]}):e.jsx("div",{className:"container",children:e.jsxs("div",{className:"event-card",children:[e.jsxs("h2",{children:["Основная информация о мероприятии ",s.name??""]}),e.jsx("section",{children:e.jsxs("label",{children:["Номер темы: ",s.theme.code]})}),e.jsxs("section",{children:[e.jsx("label",{children:"Описание темы"}),e.jsx("p",{children:s.theme.description})]}),s.actor&&e.jsxs("section",{children:[e.jsx("label",{children:"Исполнитель"}),e.jsx("p",{children:s.actor})]}),s.name&&e.jsxs("section",{children:[e.jsx("label",{children:"Наименование мероприятия:"}),e.jsx("p",{children:s.name})]}),s.date&&e.jsxs("section",{children:[e.jsx("label",{children:"Дата проведения:"}),e.jsx("p",{children:s.date})]}),s.content&&e.jsxs("section",{children:[e.jsx("label",{children:"Краткое описание мероприятия:"}),e.jsx("p",{children:s.content})]}),s.levelType&&e.jsxs("section",{children:[e.jsx("label",{children:"Уровень мероприятия:"}),e.jsx("p",{children:s.levelType})]}),s.eventType&&e.jsxs("section",{children:[e.jsx("label",{children:"Форма проведения"}),e.jsx("p",{children:s.eventType})]}),s.mediaLinks&&s.mediaLinks.length>0&&e.jsxs("section",{children:[e.jsx("label",{children:"Ссылка на СМИ/СМК:"}),s.mediaLinks.map(n=>e.jsxs("tr",{children:[n.organizationName&&e.jsxs("label",{children:["СМИ: ",n.organizationName]}),e.jsx("a",{href:n.content,target:"_blank",rel:"noopener noreferrer",children:n.content})]},n.id))]}),s.categories&&s.categories.length>0&&e.jsxs("section",{children:[e.jsx("h2",{children:"Участники мероприятия"}),s.categories.map(n=>e.jsx("tr",{children:e.jsxs("p",{children:[e.jsxs("strong",{children:[n.name,": "]}),n.count]})},n.id))]}),s.finance&&e.jsxs("section",{children:[e.jsx("h2",{children:"Финансирование"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Муниципальный бюджет:"})," ",(h=s.finance)==null?void 0:h.municipalBudget," руб."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Окружной бюджет:"})," ",(x=s.finance)==null?void 0:x.regionalBudget," руб."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Гранты/Субсидии:"})," ",(j=s.finance)==null?void 0:j.granteBudget," руб."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Другое:"})," ",(p=s.finance)==null?void 0:p.otherBudget," руб."]}),e.jsx("p",{children:e.jsxs("strong",{children:["ИТОГО: ",(b=s.finance)==null?void 0:b.total," руб. "]})})]}),s.feedBack&&e.jsxs("section",{children:[e.jsx("h2",{children:"Обратная связь"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Опрос:"})," ",s.feedBack.hasOpros?"Да":"Нет"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Онлайн-опрос:"})," ",s.feedBack.hasInternet?"Да":"Нет"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Анкетирование:"})," ",s.feedBack.hasGuestionnaire?"Да":"Нет"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Интервью:"})," ",s.feedBack.hasInterview?"Да":"Нет"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Другое:"})," ",s.feedBack.hasOther?"Да":"Нет"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Описание:"})," ",s.feedBack.description]})]}),s.interAgencyCooperations&&s.interAgencyCooperations.length>0&&e.jsxs("section",{children:[e.jsx("h2",{children:"Взаимодействие"}),e.jsxs("table",{style:{color:"black",border:"1px black solid"},children:[e.jsx("thead",{style:{color:"black",border:"1px black solid"},children:e.jsxs("tr",{style:{color:"black",border:"1px black solid"},children:[e.jsx("td",{style:{color:"black",border:"1px black solid"},children:"Организация"}),e.jsx("td",{style:{color:"black",border:"1px black solid"},children:"Тип участия"}),e.jsx("td",{style:{color:"black",border:"1px black solid"},children:"Описание"})]})}),e.jsx("tbody",{style:{color:"black",border:"1px black solid"},children:s.interAgencyCooperations.map(n=>e.jsxs("tr",{style:{color:"black",border:"1px black solid"},children:[e.jsx("td",{style:{color:"black",border:"1px black solid"},children:n.organization}),e.jsx("td",{style:{color:"black",border:"1px black solid"},children:n.role}),e.jsx("td",{style:{color:"black",border:"1px black solid"},children:n.description})]},n.id))})]})]}),s.supports&&s.supports.length>0&&e.jsxs("section",{children:[e.jsx("h2",{children:"Поддержка"}),s.supports.map(n=>e.jsx("tr",{children:e.jsxs("p",{children:[e.jsxs("strong",{children:[n.supportType,": "]}),n.description]})},n.id))]}),s.audiences&&s.audiences.length>0&&e.jsxs("section",{children:[e.jsx("h2",{children:"Целевая аудитория"}),s.audiences.map(n=>e.jsx("tr",{children:e.jsx("p",{children:e.jsxs("strong",{children:["  ",n.category]})})},n.id))]}),s.theme.code==="1.3.5"&&e.jsxs("section",{children:[e.jsx("h2",{children:"Отправка"}),e.jsx("p",{children:e.jsxs("strong",{children:["Отправка в НАК: ",s.directToNAC?"Да":"Нет"]})}),e.jsx("p",{children:e.jsxs("strong",{children:["Отправка в субъекты: ",s.directToSubjects??"Нет"]})})]}),s.agreements&&s.agreements.length>0&&e.jsxs("section",{children:[e.jsx("h2",{children:"Согласования"}),s.agreements.map(n=>e.jsxs("tr",{children:[e.jsx("p",{children:e.jsxs("strong",{children:["Организация: ",n.organization]})}),e.jsx("p",{children:e.jsxs("strong",{children:["Результат: ",n.result]})}),e.jsx("p",{children:e.jsxs("strong",{children:["Описание: ",n.description??"Нет"]})})]},n.id))]}),s.violations&&s.violations.length>0&&e.jsxs("section",{children:[e.jsx("h2",{children:"Выявленные нарушения и блокировки: "}),s.violations.map(n=>e.jsxs("tr",{children:[e.jsx("p",{children:e.jsxs("strong",{children:["Орган власти или статья: ",n.name]})}),e.jsx("p",{children:e.jsxs("strong",{children:["Количество заблокированных/отправленных материалов: ",n.blocked,"/",n.send]})}),n.order&&e.jsx("p",{children:e.jsxs("strong",{children:["Соответствующий приказ: ",n.order]})})]},n.id))]}),s.concourse&&e.jsxs("section",{children:[e.jsx("h2",{children:"Направление на участие в конкурсе"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Название/описание конкурса: "})," ",s.concourse.description]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Результат конкурса: "})," ",s.concourse.result]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Описание результата конкурса: "})," ",s.concourse.details??""]})]}),s.isValuable!==null||s.isValuable&&e.jsxs("section",{children:[e.jsx("h2",{children:"Дополнительные характеристики"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Значимое мероприятие: "})," ",s.isValuable?"Да":"Нет"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Включено в сборник лучших практик: "})," ",s.isBestPractice?"Да":"Нет"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Формат равный равному: "})," ",s.equalToEqualDescription??"Нет"]})]}),e.jsx("button",{className:"delete",type:"button",onClick:()=>l(!0),children:"Удалить"}),e.jsx(C,{isOpen:i,onConfirm:t,onCancel:()=>l(!1)}),e.jsx("button",{className:"back",type:"button",onClick:()=>window.history.back(),children:" Назад"})]})})},N=()=>e.jsxs(e.Fragment,{children:[e.jsx(w,{}),e.jsx(E,{})]});v.createRoot(document.getElementById("root")).render(e.jsx(c.StrictMode,{children:e.jsx(N,{})}));
