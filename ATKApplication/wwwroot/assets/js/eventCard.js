import{j as e,r as c,S as u,c as k}from"./Sidebar-chunk.js";import{t as f}from"./toastr.min-chunk.js";const m=({isOpen:t,onConfirm:l,onCancel:i})=>t?e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("h2",{children:"Подтверждение удаления"}),e.jsx("p",{children:"Вы уверены, что хотите удалить?"}),e.jsxs("div",{className:"modal-buttons",children:[e.jsx("button",{className:"confirm-del-btn",onClick:l,children:"Удалить"}),e.jsx("button",{className:"confirm-cancel-btn",onClick:i,children:"Отмена"})]})]})}):null,y=()=>{const[t,l]=c.useState(!1),i=async()=>{let n="/api/ref/events/delete/"+s.id;try{const r=await fetch(n,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!r.ok)throw new Error("Ошибка при удалении события");if(r.status==204){const h=await r.text();f.success("Мероприятие успешно удалено из системы!","Удалено"),setTimeout(()=>{window.location.href="/events"},3e3)}}catch(r){console.error("Ошибка:",r)}l(!1)},[s,x]=c.useState(null),[j,p]=c.useState(!0),[o,b]=c.useState(null),d=window.location.pathname.split("/"),a=d[d.length-1],g=`/api/ref/events/${a}`;return c.useEffect(()=>{(async()=>{try{const r=await fetch(g);if(!r.ok)throw new Error("Ошибка загрузки данных");const h=await r.json();x(h)}catch(r){b(r.message)}finally{p(!1)}})()},[a]),j?e.jsx("p",{children:"Загрузка..."}):o?e.jsxs("p",{children:["Ошибка: ",o]}):e.jsx("div",{className:"container",children:e.jsxs("div",{className:"event-card",children:[e.jsxs("h2",{children:['Основная информация о мероприятии "',s.name,'"']}),e.jsxs("section",{children:[e.jsx("label",{children:"Номер темы:"}),e.jsxs("p",{children:['"№ ',s.theme.code]})]}),e.jsxs("section",{children:[e.jsx("label",{children:"Описание темы"}),e.jsx("p",{children:s.theme.description})]}),e.jsxs("section",{children:[e.jsx("label",{children:"Наименование мероприятия:"}),e.jsx("p",{children:s.name})]}),e.jsxs("section",{children:[e.jsx("label",{children:"Статус:"}),e.jsx("p",{children:s.eventStatus})]}),e.jsxs("section",{children:[e.jsx("label",{children:"Дата проведения:"}),e.jsx("p",{children:s.dateTime})]}),e.jsxs("section",{children:[e.jsx("label",{children:"Краткое описание мероприятия:"}),e.jsx("p",{children:s.content})]}),e.jsxs("section",{children:[e.jsx("label",{children:"Уровень мероприятия:"}),e.jsx("p",{children:s.levelType})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"Форма проведения"}),e.jsx("p",{children:s.eventType})]}),e.jsxs("section",{children:[e.jsx("label",{children:"Ссылка на СМИ/СМК:"}),e.jsx("a",{href:"https://news.example.com",target:"_blank",rel:"noopener noreferrer",children:"https://news.example.com"})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"Количество участников"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Школьники:"})," ",s.category.schools]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Студенты:"})," ",s.category.students]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Работающая молодежь:"})," ",s.category.workingYouth]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Неработающая молодежь:"})," ",s.category.notWorkingYouth]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Мигранты:"})," ",s.category.migrants]}),e.jsxs("p",{children:[e.jsx("strong",{children:"На учете:"})," ",s.category.registrated]}),e.jsx("p",{children:e.jsxs("strong",{children:["Общее количество: ",s.category.total," "]})})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"Финансирование"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Муниципальный бюджет:"})," ",s.finance.municipalBudget," руб."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Окружной бюджет:"})," ",s.finance.regionalBudget," руб."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Гранты/Субсидии:"})," ",s.finance.granteBudget," руб."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Другое:"})," ",s.finance.otherBudget," руб."]}),e.jsx("p",{children:e.jsxs("strong",{children:["ИТОГО: ",s.finance.total," руб. "]})})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"Обратная связь"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Опрос:"})," ",s.feedBack.hasOpros?"Да":"Нет"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Онлайн-опрос:"})," ",s.feedBack.hasInternet?"Да":"Нет"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Анкетирование:"})," ",s.feedBack.hasGuestionnaire?"Да":"Нет"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Интервью:"})," ",s.feedBack.hasInterview?"Да":"Нет"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Другое:"})," ",s.feedBack.hasOther?"Да":"Нет"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Описание:"})," ",s.feedBack.description]})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"Взаимодействие"}),e.jsxs("table",{style:{color:"black",border:"2px black solid"},children:[e.jsx("thead",{style:{color:"black",border:"2px black solid"},children:e.jsxs("tr",{style:{color:"black",border:"2px black solid"},children:[e.jsx("td",{style:{color:"black",border:"2px black solid"},children:"Организация"}),e.jsx("td",{style:{color:"black",border:"2px black solid"},children:"Тип участия"}),e.jsx("td",{style:{color:"black",border:"2px black solid"},children:"Описание"})]})}),e.jsx("tbody",{style:{color:"black",border:"2px black solid"},children:s.interAgencyCooperations.map(n=>e.jsxs("tr",{style:{color:"black",border:"2px black solid"},children:[e.jsx("td",{style:{color:"black",border:"2px black solid"},children:n.organization}),e.jsx("td",{style:{color:"black",border:"2px black solid"},children:n.type}),e.jsx("td",{style:{color:"black",border:"2px black solid"},children:n.description})]},n.id))})]})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"Дополнительные характеристики"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Значимое мероприятие: "})," ",s.isValuable]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Включено в сборник лучших практик: "})," ",s.isBestPractice]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Формат равный равному: "})," ",s.equalToEqual??"Нет"]})]}),e.jsx("button",{className:"edit",type:"button",children:"Редактировать"}),e.jsx("button",{className:"delete",type:"button",onClick:()=>l(!0),children:"Удалить"}),e.jsx(m,{isOpen:t,onConfirm:i,onCancel:()=>l(!1)}),e.jsx("button",{className:"back",type:"button",onClick:()=>window.history.back(),children:" Назад"})]})})},w=()=>e.jsxs(e.Fragment,{children:[e.jsx(u,{}),e.jsx(y,{})]});k.createRoot(document.getElementById("root")).render(e.jsx(c.StrictMode,{children:e.jsx(w,{})}));
