import{j as e,r as s,S as Ue,c as Ze}from"./Sidebar-chunk.js";import{t as L}from"./toastr.min-chunk.js";const Ge=({link:t,setLink:x,level:a,setLevel:j,formConducted:d,setFormConducted:u,isOtherDescriptionVisible:l,setIsOtherDescriptionVisible:c,otherDescription:k,setOtherDescription:g})=>{const n=o=>x(o.target.value),r=o=>j(o.target.value),i=o=>{const E=o.target.value;u(E),c(E==="other")},D=o=>g(o.target.value);return e.jsxs(e.Fragment,{children:[e.jsxs("section",{children:[e.jsxs("label",{htmlFor:"link",children:["Ссылка на СМИ/СМК",e.jsx("span",{className:"required",children:"*"}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"?"}),e.jsx("span",{className:"tooltiptext",children:"Это обязательное поле"})]})]}),e.jsx("input",{type:"text",id:"link",name:"link",value:t,onChange:n,maxLength:200,placeholder:"Введите одну или несколько ссылок через запятую, например: https://example1.com, https://example2.com",required:!0})]}),e.jsxs("section",{children:[e.jsxs("label",{htmlFor:"level",children:["Уровень мероприятия",e.jsx("span",{className:"required",children:"*"}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"?"}),e.jsx("span",{className:"tooltiptext",children:"Это обязательное поле"})]}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"!"}),e.jsx("span",{className:"tooltiptext",children:"Влияет на рейтинг мероприятия"})]})]}),e.jsxs("select",{id:"level",name:"level",value:a,onChange:r,required:!0,children:[e.jsx("option",{value:"",children:"Выберите уровень"}),e.jsx("option",{value:"institution",children:"Учреждение"}),e.jsx("option",{value:"municipality",children:"Муниципалитет"}),e.jsx("option",{value:"intermunicipality",children:"Межмуниципитет"}),e.jsx("option",{value:"regional",children:"Региональный"}),e.jsx("option",{value:"interregional",children:"Межрегиональный"}),e.jsx("option",{value:"all_russian",children:"Всероссийский"}),e.jsx("option",{value:"international",children:"Международный"})]})]}),e.jsxs("section",{children:[e.jsxs("label",{htmlFor:"formConducted",children:["Форма проведения",e.jsx("span",{className:"required",children:"*"}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"?"}),e.jsx("span",{className:"tooltiptext",children:"Это обязательное поле"})]}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"!"}),e.jsx("span",{className:"tooltiptext",children:"Влияет на рейтинг мероприятия"})]})]}),e.jsxs("select",{id:"formConducted",name:"formConducted",value:d,onChange:i,required:!0,children:[e.jsx("option",{value:"",children:"Выберите форму проведения"}),e.jsx("option",{value:"lecture",children:"Лекция"}),e.jsx("option",{value:"action",children:"Акция"}),e.jsx("option",{value:"quiz",children:"Квиз"}),e.jsx("option",{value:"quest",children:"Квест"}),e.jsx("option",{value:"game",children:"Игра"}),e.jsx("option",{value:"other",children:"Другое"})]}),l&&e.jsxs("div",{id:"otherDescriptionContainer",children:[e.jsx("label",{htmlFor:"otherDescription",children:"Описание:"}),e.jsx("textarea",{id:"otherDescription",name:"otherDescription",value:k,onChange:D,maxLength:300,placeholder:"Введите описание формы проведения, не более 300 символов",required:!0})]})]})]})},We=({eventName:t,setEventName:x,eventDate:a,setEventDate:j,eventDescription:d,setEventDescription:u,dateHasError:l})=>{const c=n=>x(n.target.value),k=n=>j(n.target.value),g=n=>u(n.target.value);return e.jsxs(e.Fragment,{children:[e.jsxs("section",{children:[e.jsxs("label",{htmlFor:"event_name",children:["Наименование мероприятия",e.jsx("span",{className:"required",children:"*"}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"?"}),e.jsx("span",{className:"tooltiptext",children:"Это обязательное поле"})]})]}),e.jsx("input",{type:"text",id:"event_name",name:"event_name",value:t,onChange:c,placeholder:"Введите название мероприятия",required:!0})]}),e.jsxs("section",{children:[e.jsxs("label",{htmlFor:"event_date",children:["Дата проведения",e.jsx("span",{className:"required",children:"*"}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"?"}),e.jsx("span",{className:"tooltiptext",children:"Это обязательное поле"})]})]}),e.jsx("input",{type:"date",id:"event_date",name:"event_date",value:a,onChange:k,min:`${new Date().getFullYear()}-01-01`,max:`${new Date().getFullYear()}-12-31`,className:l?"error":"",required:!0})]}),e.jsxs("section",{children:[e.jsxs("label",{htmlFor:"event_description",children:["Краткое описание мероприятия",e.jsx("span",{className:"required",children:"*"}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"?"}),e.jsx("span",{className:"tooltiptext",children:"Это обязательное поле"})]})]}),e.jsx("textarea",{id:"event_description",name:"event_description",value:d,onChange:g,maxLength:200,placeholder:"Введите описание, не более 200 символов",required:!0})]})]})},Qe=({resultDescription:t,setResultDescription:x,uprDescription:a,setUprDescription:j})=>{const d=l=>x(l.target.value),u=l=>j(l.target.value);return e.jsxs(e.Fragment,{children:[e.jsxs("section",{children:[e.jsxs("label",{htmlFor:"resultDescription",children:["Результаты проведения",e.jsx("span",{className:"required",children:"*"}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"?"}),e.jsx("span",{className:"tooltiptext",children:"Это обязательное поле"})]})]}),e.jsx("textarea",{id:"resultDescription",name:"resultDescription",value:t,onChange:d,maxLength:200,placeholder:"Введите описание, не более 200 символов",required:!0})]}),e.jsxs("section",{children:[e.jsxs("label",{htmlFor:"uprDescription",children:["Необходимые управленческие решения",e.jsx("span",{className:"required",children:"*"}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"?"}),e.jsx("span",{className:"tooltiptext",children:"Это обязательное поле"})]})]}),e.jsx("textarea",{id:"uprDescription",name:"uprDescription",value:a,onChange:u,maxLength:200,placeholder:"Введите описание, не более 200 символов",required:!0})]})]})},Xe=({isCooperation:t,setIsCooperation:x,selectedOrganizations:a,setSelectedOrganizations:j,otherOrganizations:d,setOtherOrganizations:u})=>{const l=()=>{u(n=>[...n,{name:"",role:"",description:""}])},c=(n,r,i)=>{const D=[...d];D[n][r]=i,u(D)},k=n=>{u(r=>r.filter((i,D)=>D!==n))},g=n=>{j(r=>{const i={...r};return i[n]?delete i[n]:i[n]={role:"",description:""},i})};return e.jsxs("section",{children:[e.jsx("h2",{children:"Сотрудничество с другими организациями"}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:t,onChange:()=>x(!t)}),"Было сотрудничество с другими организациями"]}),t&&e.jsxs(e.Fragment,{children:[["Аппарат АТК-ХМАО","Аппарат АТК-ОНСУ","СОНКО","ОМВД по ОНСУ","СВО","ЛОМЫ","Представители религиозных организаций традиционных для России конфессий"].map(n=>e.jsxs("div",{className:"organization-row",children:[e.jsxs("label",{className:"org-label",children:[n,e.jsx("input",{type:"checkbox",checked:!!a[n],onChange:()=>g(n),className:"org-checkbox"})]}),a[n]&&e.jsxs(e.Fragment,{children:[e.jsxs("select",{value:a[n].role,onChange:r=>j(i=>{var D;return{...i,[n]:{...i[n],role:r.target.value,description:r.target.value==="выступление"&&((D=i[n])==null?void 0:D.description)||""}}}),children:[e.jsx("option",{value:"",children:"Выберите роль"}),e.jsx("option",{value:"участие",children:"Принял участие"}),e.jsx("option",{value:"выступление",children:"Выступил"})]}),a[n].role==="выступление"&&e.jsx("textarea",{maxLength:200,placeholder:"Описание выступления",value:a[n].description,onChange:r=>j(i=>({...i,[n]:{...i[n],description:r.target.value}}))})]})]},n)),d.map((n,r)=>e.jsxs("div",{className:"organization-row",children:[e.jsxs("div",{className:"org-header",children:[e.jsx("input",{type:"text",placeholder:"Название организации",maxLength:50,value:n.name,onChange:i=>c(r,"name",i.target.value)}),e.jsx("span",{className:"remove-org-x",onClick:()=>k(r),children:"×"})]}),e.jsxs("select",{value:n.role,onChange:i=>c(r,"role",i.target.value),children:[e.jsx("option",{value:"",children:"Выберите роль"}),e.jsx("option",{value:"участие",children:"Принял участие"}),e.jsx("option",{value:"выступление",children:"Выступил"})]}),n.role==="выступление"&&e.jsx("textarea",{placeholder:"Описание выступления, не более 200 символов!",maxLength:200,value:n.description,onChange:i=>c(r,"description",i.target.value)})]},`custom-${r}`)),e.jsx("button",{id:"add_button",type:"button",className:"add-organization-btn",onClick:l,children:"+ Добавить организацию"})]})]})},es=({financing:t,setFinancing:x,hasFinancing:a,setHasFinancing:j,financingOtherDescription:d,setFinancingOtherDescription:u})=>{const l=c=>{x({...t,[c.target.name]:c.target.value})};return e.jsxs("section",{children:[e.jsx("h2",{children:"Финансирование"}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:a,onChange:()=>j(!a)}),"Есть финансирование"]}),a&&e.jsxs("div",{className:"financing-details",children:[e.jsxs("div",{className:"financing-row",children:[e.jsxs("div",{className:"financing-field",children:[e.jsx("label",{children:"Муниципальный бюджет:"}),e.jsx("input",{type:"number",name:"municipal",placeholder:"0",min:"0",value:t.municipal,onChange:l})]}),e.jsxs("div",{className:"financing-field",children:[e.jsx("label",{children:"Окружной бюджет:"}),e.jsx("input",{type:"number",name:"regional",placeholder:"0",min:"0",value:t.regional,onChange:l})]})]}),e.jsxs("div",{className:"financing-row",children:[e.jsxs("div",{className:"financing-field",children:[e.jsx("label",{children:"Гранты/Субсидии:"}),e.jsx("input",{type:"number",name:"grants",placeholder:"0",min:"0",value:t.grants,onChange:l})]}),e.jsxs("div",{className:"financing-field",children:[e.jsx("label",{children:"Другое (сумма):"}),e.jsx("input",{type:"number",name:"other",placeholder:"0",min:"0",value:t.other,onChange:l})]})]}),t.other&&e.jsxs("div",{className:"other-details",children:[e.jsx("label",{children:"Описание источника финансирования:"}),e.jsx("textarea",{maxLength:200,placeholder:"Введите описание источника, не более 200 символов",value:d,onChange:c=>u(c.target.value)})]}),e.jsx("div",{className:"total-amount",children:e.jsxs("p",{children:["ИТОГО:"," ",e.jsx("span",{children:(Number(t.municipal)+Number(t.regional)+Number(t.grants)+Number(t.other)).toFixed(2)})]})})]})]})},ss=({equalFormat:t,setEqualFormat:x,equalFormatDescription:a,setEqualFormatDescription:j,bestEvent:d,setBestEvent:u,importantEvent:l,setImportantEvent:c})=>{const k=()=>{x(!t)},g=()=>{u(!d)},n=()=>{c(!l)},r=i=>{j(i.target.value)};return e.jsxs("section",{children:[e.jsx("h2",{children:"Дополнительные характеристики"}),e.jsx("div",{className:"checkbox-container",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:l,onChange:n}),"Отметить, как значимое мероприятие"]})}),e.jsx("div",{className:"checkbox-container",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:d,onChange:g}),"Включить в сборник лучших практик"]})}),e.jsxs("div",{className:"checkbox-container",children:[e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:t,onChange:k}),'Формат "равный равному"']}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"!"}),e.jsx("span",{className:"tooltiptext",children:"Влияет на рейтинг мероприятия"})]})]}),t&&e.jsxs("div",{id:"peer_format_description",children:[e.jsx("label",{children:"Описание:"}),e.jsx("textarea",{value:a,onChange:r,maxLength:200,placeholder:"Введите описание формата 'равный равному', не более 200 символов"})]})]})},ts=({participants:t,setParticipants:x,detailedInput:a,setDetailedInput:j,customParticipants:d,setCustomParticipants:u,totalParticipants:l,setTotalParticipants:c})=>{const[k,g]=s.useState([{category:"",count:0}]),[n,r]=s.useState(!1),[i,D]=s.useState(!1),o=m=>{const{name:f,value:N}=m.target;x(S=>({...S,[f]:N}))},E=()=>{u(m=>[...m,{label:"",count:0}])},I=(m,f,N)=>{const S=[...d];S[m][f]=f==="count"?Number(N):N,u(S)},H=m=>{u(f=>f.filter((N,S)=>S!==m))};return s.useEffect(()=>{const m=Object.values(t).reduce((S,w)=>S+Number(w||0),0),f=d.reduce((S,w)=>S+Number(w.count||0),0),N=k.reduce((S,w)=>S+Number(w.count||0),0);c(m+f+N)},[t,d,k]),e.jsxs("section",{children:[e.jsx("h2",{children:"Количество участников"}),e.jsxs("label",{children:[a?"Категории участников":"Количество участников",!a&&e.jsx("input",{type:"number",min:0,value:l,onChange:m=>c(Number(m.target.value)),className:"simple-total-input",placeholder:"Введите количество"})]}),e.jsxs("label",{style:{marginTop:"10px",display:"block"},children:[e.jsx("input",{type:"checkbox",checked:a,onChange:m=>{j(m.target.checked),m.target.checked&&(c(0),u([]))}}),"Подробнее"]}),a&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"participants-row",children:[e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Школьники"}),e.jsx("input",{type:"number",min:"0",name:"schoolKids",value:t.schoolKids,onChange:o})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Студенты"}),e.jsx("input",{type:"number",min:"0",name:"students",value:t.students,onChange:o})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Состоящие на различных формах учёта"}),e.jsx("input",{type:"number",min:"0",name:"registeredPersons",value:t.registeredPersons,onChange:o})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Трудовые мигранты"}),e.jsx("input",{type:"number",min:"0",name:"trud-migrants",value:t.trudmigrants,onChange:o})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Работающая молодёжь"}),e.jsx("input",{type:"number",min:"0",name:"workingYouth",value:t.workingYouth,onChange:o})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Не работающая молодёжь"}),e.jsx("input",{type:"number",min:"0",name:"unemployedYouth",value:t.unemployedYouth,onChange:o})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Мигранты-студенты"}),e.jsx("input",{type:"number",min:"0",name:"migrantStudents",value:t.migrantStudents,onChange:o})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Дети мигрантов (в ОУ)"}),e.jsx("input",{type:"number",min:"0",name:"migrantChildrenInSchools",value:t.migrantChildrenInSchools,onChange:o})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Дети мигрантов (дом. обучение)"}),e.jsx("input",{type:"number",min:"0",name:"migrantChildrenHome",value:t.migrantChildrenHome,onChange:o})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Жители новых субъектов РФ"}),e.jsx("input",{type:"number",min:"0",name:"newSubjectsResidents",value:t.newSubjectsResidents,onChange:o})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Школьники на учёте"}),e.jsx("input",{type:"number",min:"0",name:"registeredSchoolKids",value:t.registeredSchoolKids,onChange:o})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Молодёжь на учёте"}),e.jsx("input",{type:"number",min:"0",name:"registeredYouth",value:t.registeredYouth,onChange:o})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Возвратившиеся из зон БД"}),e.jsx("input",{type:"number",min:"0",name:"returnedFromCombatZones",value:t.returnedFromCombatZones,onChange:o})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Субкультуры, склонные к насилию"}),e.jsx("input",{type:"number",min:"0",name:"subcultureYouth",value:t.subcultureYouth,onChange:o})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Дети/школьники с суиц. наклонностями"}),e.jsx("input",{type:"number",min:"0",name:"suicidalChildren",value:t.suicidalChildren,onChange:o})]})]})}),a&&e.jsxs("section",{className:"form-section",children:[d.map((m,f)=>e.jsxs("div",{className:"organization-row",children:[e.jsxs("div",{className:"org-header",children:[e.jsx("input",{type:"text",placeholder:"Категория участников, пишите внимательно, без ошибок, с большой буквы!",maxLength:50,value:m.label,spellCheck:!0,onChange:N=>I(f,"label",N.target.value)}),e.jsx("span",{className:"remove-org-x",onClick:()=>H(f),title:"Удалить",children:"×"})]}),e.jsx("input",{type:"number",min:"0",placeholder:"Количество",value:m.count,onChange:N=>I(f,"count",N.target.value)})]},f)),e.jsx("div",{className:"add-org-btn-wrapper",children:e.jsx("button",{type:"button",id:"add_button",className:"add-organization-btn",onClick:E,children:"+ Добавить категорию"})})]}),e.jsx("div",{className:"participant-total",children:e.jsxs("strong",{children:[" ИТОГО: ",l]})})]})},ns=({feedbackCollected:t,setFeedbackCollected:x,selectedFeedbackTypes:a,setSelectedFeedbackTypes:j,feedbackDescription:d,setFeedbackDescription:u})=>{const l=()=>{x(g=>!g)},c=g=>{j(n=>n.includes(g)?n.filter(r=>r!==g):[...n,g])},k=g=>{u(g.target.value)};return e.jsxs("section",{children:[e.jsx("h2",{children:"Обратная связь"}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:t,onChange:l}),"Обратная связь была собрана:"]}),t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"feedback-types",children:[e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:a.includes("Анкетирование"),onChange:()=>c("Анкетирование")}),"Анкетирование"]}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:a.includes("Опрос"),onChange:()=>c("Опрос")}),"Опрос"]}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:a.includes("Онлайн-опрос"),onChange:()=>c("Онлайн-опрос")}),"Онлайн-опрос"]}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:a.includes("Интервью"),onChange:()=>c("Интервью")}),"Интервью"]})]}),e.jsxs("div",{className:"feedback-description",children:[e.jsx("label",{htmlFor:"feedbackDescription",children:"Описание обратной связи:"}),e.jsx("textarea",{id:"feedbackDescription",name:"feedbackDescription",value:d,onChange:k,maxLength:200,placeholder:"Введите описание, не более 200 символов"})]})]})]})},as=()=>{const[t,x]=s.useState(!1),[a,j]=s.useState(""),[d,u]=s.useState(!1),[l,c]=s.useState({}),[k,g]=s.useState([]);Object.values(l);const[n,r]=s.useState([]),[i,D]=s.useState(""),[o,E]=s.useState([]),[I,H]=s.useState(!1),[m,f]=s.useState([]),[N,S]=s.useState(!1),[w,re]=s.useState([]),[J,oe]=s.useState(""),[de,ls]=s.useState(!1),[he,cs]=s.useState(!1),[M,ue]=s.useState(!1),[pe,me]=s.useState(""),[xe,V]=s.useState(0),[U,je]=s.useState(!1),[rs,os]=s.useState(""),[ds,hs]=s.useState(0),[us,ps]=s.useState(!1),[ge,ve]=s.useState([{category:"",count:0}]),[be,Ce]=s.useState(""),[F,Z]=s.useState({schoolKids:0,students:0,registeredPersons:0,trudmigrants:0,workingYouth:0,unemployedYouth:0,migrantStudents:0,migrantChildrenInSchools:0,migrantChildrenHome:0,newSubjectsResidents:0,registeredSchoolKids:0,registeredYouth:0,returnedFromCombatZones:0,subcultureYouth:0,suicidalChildren:0}),fe=h=>{V(parseInt(h.target.value)||0)},[T,P]=s.useState([]),[Ne,Se]=s.useState(""),ke=()=>{P(h=>[...h,{label:"",count:0}])},ye=(h,C,v)=>{const b=[...T];b[h][C]=C==="count"?Number(v):v,P(b)},De=h=>{P(C=>C.filter((v,b)=>b!==h))};s.useEffect(()=>{const h=Object.values(F).reduce((v,b)=>v+Number(b||0),0),C=T.reduce((v,b)=>v+Number(b.count||0),0);V(h+C)},[F,T]);const[G,Fe]=s.useState(""),[qe,ms]=s.useState(""),we=h=>{Fe(h.target.value)},[O,W]=s.useState(""),[_,Q]=s.useState(""),[Y,X]=s.useState(""),[ee,Ee]=s.useState(""),[R,Te]=s.useState(""),[se,_e]=s.useState(""),[Le,Ie]=s.useState(""),[xs,js]=s.useState(!1),Pe=h=>{const{name:C,value:v}=h.target;Z(b=>({...b,[C]:parseInt(v)||0}))},[A,Oe]=s.useState(!1),[te,Ye]=s.useState({municipal:"",regional:"",grants:"",other:""}),[Re,gs]=s.useState(""),ne=async h=>{if(h.preventDefault(),!K){L.error("Пожалуйста, выберите тему","Ошибка");return}try{const p=await fetch("/api/ref/events/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(B)});if(!p.ok)throw new Error("Ошибка при создании события");const y=await p.text();L.success("Данные успешно сохранены!","Успех"),console.log("Событие создано:",y)}catch(p){console.error("Ошибка:",p),L.error("Произошла ошибка при создании события","Ошибка")}console.log("Topics:",Je);let C=N?w:[],v=N?J:"",b=A?te:{municipal:"",regional:"",grants:"",other:""},Ke=A?Re:"",Ve=d?l:{},Ae=M?a:"";const q=document.getElementById("event_date"),$e=new Date(_),ze=new Date().getFullYear();if($e.getFullYear()!==ze){q==null||q.classList.add("error"),q==null||q.scrollIntoView({behavior:"smooth",block:"center"}),alert("Дата должна быть в пределах текущего года.");return}else q==null||q.classList.remove("error");h.preventDefault();let $=!1;[{value:O,id:"event_name"},{value:_,id:"event_date"},{value:Y,id:"event_description"},{value:R,id:"link"}].forEach(p=>{const y=document.getElementById(p.id);p.value.trim()?y.classList.remove("error"):(y.classList.add("error"),$=!0,y.scrollIntoView({behavior:"smooth",block:"center"}))});const le=document.getElementById("link"),ce=R.split(",").map(p=>p.trim()).filter(p=>!/^(https?|http):\/\/[^\s$.?#].[^\s]*$/.test(p));if(ce.length>0&&(le.classList.add("error"),le.scrollIntoView({behavior:"smooth",block:"center"}),alert(`Некорректные ссылки: ${ce.join(", ")}`),$=!0),$){alert("Пожалуйста, заполните все обязательные поля и исправьте ошибки.");return}let B={name:O,content:Y,date:_,level:ee,form:se,themeCode:qe,isBestPractice:he,isValuable:de,createMediaLinkRequest:{content:R.split(",").map(p=>p.trim())},createFinanceRequest:{MunicipalBudget:Number(b.municipal),RegionalBudget:Number(b.regional),GranteBudget:Number(b.grants),OtherBudget:Number(b.other),description:Ke},createFeedBackRequest:{feedBackTypes:C,description:v},createInterAgencyCooperationRequest:{content:Ve},createParticipantsRequest:{students:Number(F.students),schoolKids:Number(F.schoolKids),registeredPersons:Number(F.registeredPersons),trudmigrants:Number(F.trudmigrants),workingYouth:Number(F.workingYouth),notWorkingYouth:Number(F.unemployedYouth),others:U&&T.length>0?T:null},createEqualToEqualRequest:{content:Ae}};alert(JSON.stringify(B,null,2)),console.log(B),console.log("---------------");const He="/api/ref/events/create",[Je,Me]=s.useState([]),[K,Cs]=s.useState("");s.useEffect(()=>{(async()=>{try{const z=await(await fetch("/api/ref/themes")).json();Me(z)}catch(y){console.error("Ошибка при получении тем:",y)}})()},[]),s.useEffect(()=>{K&&(async()=>{try{const z=await(await fetch(`/api/ref/subthemes?topic=${K}`)).json();E(z)}catch(y){console.error("Ошибка при получении подтем:",y)}})()},[K]);try{const p=await fetch(He,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(B)});if(!p.ok)throw new Error("Ошибка при создании события");const y=await p.text();console.log("Событие создано:",y),L.success("Данные успешно сохранены и добавлены в таблицу!","Успех")}catch(p){console.error("Ошибка:",p)}},[ae,ie]=s.useState("");s.useEffect(()=>{(async()=>{try{const v=await(await fetch("/api/ref/themes")).json();console.log("Темы:",v),r(v)}catch(C){console.error("Ошибка при получении тем:",C)}})()},[]);const Be=h=>{const C=h.target.value;D(C);const v=n.find(b=>b.code===C);ie(v?v.description:"")};return e.jsx("div",{children:e.jsx("form",{onSubmit:ne,children:e.jsxs("div",{children:[e.jsx("div",{className:"centered-container",id:"above-container",children:e.jsx("img",{src:"images/АТК.png",alt:"Символика АТК"})}),e.jsxs("div",{className:"container",children:[e.jsx("div",{id:"heraldry",children:e.jsx("img",{src:"images/hanty-mansijskogo.png",alt:"Герб Ханты-Мансийского автономного округа"})}),e.jsx("label",{htmlFor:"theme_select",children:"Создание формы по номеру темы"}),e.jsxs("select",{id:"theme_select",value:G,onChange:we,children:[e.jsx("option",{value:"none",children:"Выберите тему"}),e.jsx("option",{value:"1",children:"1.1.1, 1.2.1"}),e.jsx("option",{value:"2",children:"2.1.1"})]}),G==="1"&&e.jsxs("div",{id:"form_theme_1",className:"form-block",children:[e.jsx("h1",{children:"Форма создания мероприятия"}),e.jsxs("form",{onSubmit:ne,children:[e.jsxs("label",{htmlFor:"themeSelection",children:["Выбор темы",e.jsx("span",{style:{color:"red"},children:"*"}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"?"}),e.jsx("span",{className:"tooltiptext",children:"Это обязательное поле"})]})]}),e.jsxs("select",{id:"topic",name:"topic",value:i,onChange:Be,children:[e.jsx("option",{value:"",children:"Выберите тему"}),n.length>0?n.map(h=>e.jsxs("option",{value:h.code,children:[h.code,"  "]},h.id)):e.jsx("option",{disabled:!0,children:"Темы не загружены"})]}),i&&ae&&e.jsxs("div",{className:"description-container",children:[e.jsx("h3",{children:"Описание темы:"}),e.jsx("p",{children:ae})]}),e.jsxs("section",{className:"form-section1",children:[e.jsx("h2",{children:"Основная информация о мероприятии"}),e.jsx(We,{eventName:O,setEventName:W,eventDate:_,setEventDate:Q,eventDescription:Y,setEventDescription:X,dateHasError:I}),e.jsx(Ge,{eventName:O,setEventName:W,eventDate:_,setEventDate:Q,eventDescription:Y,setEventDescription:X,level:ee,setLevel:Ee,link:R,setLink:Te,formConducted:se,setFormConducted:_e,otherDescription:Le,setOtherDescription:Ie}),e.jsx(Qe,{resultDescription:Ne,setResultDescription:Se,uprDescription:be,setUprDescription:Ce})]}),e.jsxs("section",{className:"form-section1",children:[e.jsx("h2",{children:"Дополнительная информация о мероприятии"}),e.jsx(ns,{feedbackCollected:N,setFeedbackCollected:S,selectedFeedbackTypes:w,setSelectedFeedbackTypes:re,feedbackDescription:J,setFeedbackDescription:oe}),e.jsx(es,{hasFinancing:A,setHasFinancing:Oe,financing:te,setFinancing:Ye}),e.jsx(ts,{participantsCategories:ge,setParticipantsCategories:ve,participants:F,setParticipants:Z,customParticipants:T,setCustomParticipants:P,detailedInput:U,setDetailedInput:je,totalParticipants:xe,setTotalParticipants:V,handleDetailedChange:Pe,handleTotalChange:fe,handleAddParticipant:ke,handleParticipantChange:ye,handleRemoveParticipant:De}),e.jsx(Xe,{isCooperation:d,setIsCooperation:u,selectedOrganizations:l,setSelectedOrganizations:c,otherOrganizations:m,setOtherOrganizations:f}),e.jsx(ss,{equalFormat:M,setEqualFormat:ue,equalFormatDescription:pe,setEqualFormatDescription:me})]}),e.jsx("button",{type:"submit",id:"save_button",children:"Сохранить"}),e.jsx("button",{type:"button",onClick:()=>L.success("Данные успешно сохранены и добавлены в таблицу","Успех"),children:"Показать Toastr"})]})]})]})]})})})},is=()=>{const[t,x]=s.useState(!1),a=()=>x(!t);return e.jsxs("div",{children:[e.jsx(Ue,{isOpen:t,toggleSidebar:a}),e.jsx(as,{})]})};Ze.createRoot(document.getElementById("root")).render(e.jsx(s.StrictMode,{children:e.jsx(is,{})}));
