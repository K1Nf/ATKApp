import{j as e,r as n,S as Me,c as Ue}from"./Sidebar-chunk.js";import{t as I}from"./toastr.min-chunk.js";const Ze=({topics:s,selectedTopic:u,setSelectedTopic:a,description:p,setDescription:c})=>{const d=i=>{const l=i.target.value;a(l);const v=s.find(x=>x.code===l);c(v?v.description:"")};return e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"themeSelection",children:["Выбор темы",e.jsx("span",{style:{color:"red"},children:"*"}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"?"}),e.jsx("span",{className:"tooltiptext",children:"Это обязательное поле"})]})]}),e.jsxs("select",{id:"topic",name:"topic",value:u,onChange:d,children:[e.jsx("option",{value:"",children:"Выберите тему"}),s.length>0?s.map(i=>e.jsxs("option",{value:i.code,children:[i.code,"  "]},i.id)):e.jsx("option",{disabled:!0,children:"Темы не загружены"})]}),u&&p&&e.jsxs("div",{className:"description-container",children:[e.jsx("h3",{children:"Описание темы:"}),e.jsx("p",{children:p})]})]})},Ge=({link:s,setLink:u,level:a,setLevel:p,formConducted:c,setFormConducted:d,isOtherDescriptionVisible:i,setIsOtherDescriptionVisible:l,otherDescription:v,setOtherDescription:x})=>{const t=h=>u(h.target.value),o=h=>p(h.target.value),r=h=>{const E=h.target.value;d(E),l(E==="other")},D=h=>x(h.target.value);return e.jsxs(e.Fragment,{children:[e.jsxs("section",{children:[e.jsxs("label",{htmlFor:"link",children:["Ссылка на СМИ/СМК",e.jsx("span",{className:"required",children:"*"}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"?"}),e.jsx("span",{className:"tooltiptext",children:"Это обязательное поле"})]})]}),e.jsx("input",{type:"text",id:"link",name:"link",value:s,onChange:t,maxLength:200,placeholder:"Введите одну или несколько ссылок через запятую, например: https://example1.com, https://example2.com",required:!0})]}),e.jsxs("section",{children:[e.jsxs("label",{htmlFor:"level",children:["Уровень мероприятия",e.jsx("span",{className:"required",children:"*"}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"?"}),e.jsx("span",{className:"tooltiptext",children:"Это обязательное поле"})]}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"!"}),e.jsx("span",{className:"tooltiptext",children:"Влияет на рейтинг мероприятия"})]})]}),e.jsxs("select",{id:"level",name:"level",value:a,onChange:o,required:!0,children:[e.jsx("option",{value:"",children:"Выберите уровень"}),e.jsx("option",{value:"institution",children:"Учреждение"}),e.jsx("option",{value:"municipality",children:"Муниципалитет"}),e.jsx("option",{value:"intermunicipality",children:"Межмуниципитет"}),e.jsx("option",{value:"regional",children:"Региональный"}),e.jsx("option",{value:"interregional",children:"Межрегиональный"}),e.jsx("option",{value:"all_russian",children:"Всероссийский"}),e.jsx("option",{value:"international",children:"Международный"})]})]}),e.jsxs("section",{children:[e.jsxs("label",{htmlFor:"formConducted",children:["Форма проведения",e.jsx("span",{className:"required",children:"*"}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"?"}),e.jsx("span",{className:"tooltiptext",children:"Это обязательное поле"})]}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"!"}),e.jsx("span",{className:"tooltiptext",children:"Влияет на рейтинг мероприятия"})]})]}),e.jsxs("select",{id:"formConducted",name:"formConducted",value:c,onChange:r,required:!0,children:[e.jsx("option",{value:"",children:"Выберите форму проведения"}),e.jsx("option",{value:"lecture",children:"Лекция"}),e.jsx("option",{value:"action",children:"Акция"}),e.jsx("option",{value:"quiz",children:"Квиз"}),e.jsx("option",{value:"quest",children:"Квест"}),e.jsx("option",{value:"game",children:"Игра"}),e.jsx("option",{value:"other",children:"Другое"})]}),i&&e.jsxs("div",{id:"otherDescriptionContainer",children:[e.jsx("label",{htmlFor:"otherDescription",children:"Описание:"}),e.jsx("textarea",{id:"otherDescription",name:"otherDescription",value:v,onChange:D,maxLength:300,placeholder:"Введите описание формы проведения, не более 300 символов",required:!0})]})]})]})},We=({eventName:s,setEventName:u,eventDate:a,setEventDate:p,eventDescription:c,setEventDescription:d,dateHasError:i})=>{const l=t=>u(t.target.value),v=t=>p(t.target.value),x=t=>d(t.target.value);return e.jsxs(e.Fragment,{children:[e.jsxs("section",{children:[e.jsxs("label",{htmlFor:"event_name",children:["Наименование мероприятия",e.jsx("span",{className:"required",children:"*"}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"?"}),e.jsx("span",{className:"tooltiptext",children:"Это обязательное поле"})]})]}),e.jsx("input",{type:"text",id:"event_name",name:"event_name",value:s,onChange:l,placeholder:"Введите название мероприятия",required:!0})]}),e.jsxs("section",{children:[e.jsxs("label",{htmlFor:"event_date",children:["Дата проведения",e.jsx("span",{className:"required",children:"*"}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"?"}),e.jsx("span",{className:"tooltiptext",children:"Это обязательное поле"})]})]}),e.jsx("input",{type:"date",id:"event_date",name:"event_date",value:a,onChange:v,min:`${new Date().getFullYear()}-01-01`,max:`${new Date().getFullYear()}-12-31`,className:i?"error":"",required:!0})]}),e.jsxs("section",{children:[e.jsxs("label",{htmlFor:"event_description",children:["Краткое описание мероприятия",e.jsx("span",{className:"required",children:"*"}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"?"}),e.jsx("span",{className:"tooltiptext",children:"Это обязательное поле"})]})]}),e.jsx("textarea",{id:"event_description",name:"event_description",value:c,onChange:x,maxLength:200,placeholder:"Введите описание, не более 200 символов",required:!0})]})]})},Qe=({resultDescription:s,setResultDescription:u,uprDescription:a,setUprDescription:p})=>{const c=i=>u(i.target.value),d=i=>p(i.target.value);return e.jsxs(e.Fragment,{children:[e.jsxs("section",{children:[e.jsxs("label",{htmlFor:"resultDescription",children:["Результаты проведения",e.jsx("span",{className:"required",children:"*"}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"?"}),e.jsx("span",{className:"tooltiptext",children:"Это обязательное поле"})]})]}),e.jsx("textarea",{id:"resultDescription",name:"resultDescription",value:s,onChange:c,maxLength:200,placeholder:"Введите описание, не более 200 символов",required:!0})]}),e.jsxs("section",{children:[e.jsxs("label",{htmlFor:"uprDescription",children:["Необходимые управленческие решения",e.jsx("span",{className:"required",children:"*"}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"?"}),e.jsx("span",{className:"tooltiptext",children:"Это обязательное поле"})]})]}),e.jsx("textarea",{id:"uprDescription",name:"uprDescription",value:a,onChange:d,maxLength:200,placeholder:"Введите описание, не более 200 символов",required:!0})]})]})},Xe=({isCooperation:s,setIsCooperation:u,selectedOrganizations:a,setSelectedOrganizations:p,otherOrganizations:c,setOtherOrganizations:d})=>{const i=()=>{d(t=>[...t,{name:"",role:"",description:""}])},l=(t,o,r)=>{const D=[...c];D[t][o]=r,d(D)},v=t=>{d(o=>o.filter((r,D)=>D!==t))},x=t=>{p(o=>{const r={...o};return r[t]?delete r[t]:r[t]={role:"",description:""},r})};return e.jsxs("section",{children:[e.jsx("h2",{children:"Сотрудничество с другими организациями"}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:s,onChange:()=>u(!s)}),"Было сотрудничество с другими организациями"]}),s&&e.jsxs(e.Fragment,{children:[["Аппарат АТК-ХМАО","Аппарат АТК-ОНСУ","СОНКО","ОМВД по ОНСУ","СВО","ЛОМЫ","Представители религиозных организаций традиционных для России конфессий"].map(t=>e.jsxs("div",{className:"organization-row",children:[e.jsxs("label",{className:"org-label",children:[t,e.jsx("input",{type:"checkbox",checked:!!a[t],onChange:()=>x(t),className:"org-checkbox"})]}),a[t]&&e.jsxs(e.Fragment,{children:[e.jsxs("select",{value:a[t].role,onChange:o=>p(r=>{var D;return{...r,[t]:{...r[t],role:o.target.value,description:o.target.value==="выступление"&&((D=r[t])==null?void 0:D.description)||""}}}),children:[e.jsx("option",{value:"",children:"Выберите роль"}),e.jsx("option",{value:"участие",children:"Принял участие"}),e.jsx("option",{value:"выступление",children:"Выступил"})]}),a[t].role==="выступление"&&e.jsx("textarea",{maxLength:200,placeholder:"Описание выступления",value:a[t].description,onChange:o=>p(r=>({...r,[t]:{...r[t],description:o.target.value}}))})]})]},t)),c.map((t,o)=>e.jsxs("div",{className:"organization-row",children:[e.jsxs("div",{className:"org-header",children:[e.jsx("input",{type:"text",placeholder:"Название организации",maxLength:50,value:t.name,onChange:r=>l(o,"name",r.target.value)}),e.jsx("span",{className:"remove-org-x",onClick:()=>v(o),children:"×"})]}),e.jsxs("select",{value:t.role,onChange:r=>l(o,"role",r.target.value),children:[e.jsx("option",{value:"",children:"Выберите роль"}),e.jsx("option",{value:"участие",children:"Принял участие"}),e.jsx("option",{value:"выступление",children:"Выступил"})]}),t.role==="выступление"&&e.jsx("textarea",{placeholder:"Описание выступления, не более 200 символов!",maxLength:200,value:t.description,onChange:r=>l(o,"description",r.target.value)})]},`custom-${o}`)),e.jsx("button",{id:"add_button",type:"button",className:"add-organization-btn",onClick:i,children:"+ Добавить организацию"})]})]})},es=({financing:s,setFinancing:u,hasFinancing:a,setHasFinancing:p,financingOtherDescription:c,setFinancingOtherDescription:d})=>{const i=l=>{u({...s,[l.target.name]:l.target.value})};return e.jsxs("section",{children:[e.jsx("h2",{children:"Финансирование"}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:a,onChange:()=>p(!a)}),"Есть финансирование"]}),a&&e.jsxs("div",{className:"financing-details",children:[e.jsxs("div",{className:"financing-row",children:[e.jsxs("div",{className:"financing-field",children:[e.jsx("label",{children:"Муниципальный бюджет:"}),e.jsx("input",{type:"number",name:"municipal",placeholder:"0",min:"0",value:s.municipal,onChange:i})]}),e.jsxs("div",{className:"financing-field",children:[e.jsx("label",{children:"Окружной бюджет:"}),e.jsx("input",{type:"number",name:"regional",placeholder:"0",min:"0",value:s.regional,onChange:i})]})]}),e.jsxs("div",{className:"financing-row",children:[e.jsxs("div",{className:"financing-field",children:[e.jsx("label",{children:"Гранты/Субсидии:"}),e.jsx("input",{type:"number",name:"grants",placeholder:"0",min:"0",value:s.grants,onChange:i})]}),e.jsxs("div",{className:"financing-field",children:[e.jsx("label",{children:"Другое (сумма):"}),e.jsx("input",{type:"number",name:"other",placeholder:"0",min:"0",value:s.other,onChange:i})]})]}),s.other&&e.jsxs("div",{className:"other-details",children:[e.jsx("label",{children:"Описание источника финансирования:"}),e.jsx("textarea",{maxLength:200,placeholder:"Введите описание источника, не более 200 символов",value:c,onChange:l=>d(l.target.value)})]}),e.jsx("div",{className:"total-amount",children:e.jsxs("p",{children:["ИТОГО:"," ",e.jsx("span",{children:(Number(s.municipal)+Number(s.regional)+Number(s.grants)+Number(s.other)).toFixed(2)})]})})]})]})},ss=({equalFormat:s,setEqualFormat:u,equalFormatDescription:a,setEqualFormatDescription:p,bestEvent:c,setBestEvent:d,importantEvent:i,setImportantEvent:l})=>{const v=()=>{u(!s)},x=()=>{d(!c)},t=()=>{l(!i)},o=r=>{p(r.target.value)};return e.jsxs("section",{children:[e.jsx("h2",{children:"Дополнительные характеристики"}),e.jsx("div",{className:"checkbox-container",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:i,onChange:t}),"Отметить, как значимое мероприятие"]})}),e.jsx("div",{className:"checkbox-container",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:c,onChange:x}),"Включить в сборник лучших практик"]})}),e.jsxs("div",{className:"checkbox-container",children:[e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:s,onChange:v}),'Формат "равный равному"']}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"!"}),e.jsx("span",{className:"tooltiptext",children:"Влияет на рейтинг мероприятия"})]})]}),s&&e.jsxs("div",{id:"peer_format_description",children:[e.jsx("label",{children:"Описание:"}),e.jsx("textarea",{value:a,onChange:o,maxLength:200,placeholder:"Введите описание формата 'равный равному', не более 200 символов"})]})]})},ns=({participants:s,setParticipants:u,detailedInput:a,setDetailedInput:p,customParticipants:c,setCustomParticipants:d,totalParticipants:i,setTotalParticipants:l})=>{const[v,x]=n.useState([{category:"",count:0}]),[t,o]=n.useState(!1),[r,D]=n.useState(!1),h=j=>{const{name:b,value:C}=j.target;u(N=>({...N,[b]:C}))},E=()=>{d(j=>[...j,{label:"",count:0}])},L=(j,b,C)=>{const N=[...c];N[j][b]=b==="count"?Number(C):C,d(N)},H=j=>{d(b=>b.filter((C,N)=>N!==j))};return n.useEffect(()=>{const j=Object.values(s).reduce((N,w)=>N+Number(w||0),0),b=c.reduce((N,w)=>N+Number(w.count||0),0),C=v.reduce((N,w)=>N+Number(w.count||0),0);l(j+b+C)},[s,c,v]),e.jsxs("section",{children:[e.jsx("h2",{children:"Количество участников"}),e.jsxs("label",{children:[a?"Категории участников":"Количество участников",!a&&e.jsx("input",{type:"number",min:0,value:i,onChange:j=>l(Number(j.target.value)),className:"simple-total-input",placeholder:"Введите количество"})]}),e.jsxs("label",{style:{marginTop:"10px",display:"block"},children:[e.jsx("input",{type:"checkbox",checked:a,onChange:j=>{p(j.target.checked),j.target.checked&&(l(0),d([]))}}),"Подробнее"]}),a&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"participants-row",children:[e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Школьники"}),e.jsx("input",{type:"number",min:"0",name:"schoolKids",value:s.schoolKids,onChange:h})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Студенты"}),e.jsx("input",{type:"number",min:"0",name:"students",value:s.students,onChange:h})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Состоящие на различных формах учёта"}),e.jsx("input",{type:"number",min:"0",name:"registeredPersons",value:s.registeredPersons,onChange:h})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Трудовые мигранты"}),e.jsx("input",{type:"number",min:"0",name:"trud-migrants",value:s.trudmigrants,onChange:h})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Работающая молодёжь"}),e.jsx("input",{type:"number",min:"0",name:"workingYouth",value:s.workingYouth,onChange:h})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Не работающая молодёжь"}),e.jsx("input",{type:"number",min:"0",name:"unemployedYouth",value:s.unemployedYouth,onChange:h})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Мигранты-студенты"}),e.jsx("input",{type:"number",min:"0",name:"migrantStudents",value:s.migrantStudents,onChange:h})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Дети мигрантов (в ОУ)"}),e.jsx("input",{type:"number",min:"0",name:"migrantChildrenInSchools",value:s.migrantChildrenInSchools,onChange:h})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Дети мигрантов (дом. обучение)"}),e.jsx("input",{type:"number",min:"0",name:"migrantChildrenHome",value:s.migrantChildrenHome,onChange:h})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Жители новых субъектов РФ"}),e.jsx("input",{type:"number",min:"0",name:"newSubjectsResidents",value:s.newSubjectsResidents,onChange:h})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Школьники на учёте"}),e.jsx("input",{type:"number",min:"0",name:"registeredSchoolKids",value:s.registeredSchoolKids,onChange:h})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Молодёжь на учёте"}),e.jsx("input",{type:"number",min:"0",name:"registeredYouth",value:s.registeredYouth,onChange:h})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Возвратившиеся из зон БД"}),e.jsx("input",{type:"number",min:"0",name:"returnedFromCombatZones",value:s.returnedFromCombatZones,onChange:h})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Субкультуры, склонные к насилию"}),e.jsx("input",{type:"number",min:"0",name:"subcultureYouth",value:s.subcultureYouth,onChange:h})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Дети/школьники с суиц. наклонностями"}),e.jsx("input",{type:"number",min:"0",name:"suicidalChildren",value:s.suicidalChildren,onChange:h})]})]})}),a&&e.jsxs("section",{className:"form-section",children:[c.map((j,b)=>e.jsxs("div",{className:"organization-row",children:[e.jsxs("div",{className:"org-header",children:[e.jsx("input",{type:"text",placeholder:"Категория участников, пишите внимательно, без ошибок, с большой буквы!",maxLength:50,value:j.label,spellCheck:!0,onChange:C=>L(b,"label",C.target.value)}),e.jsx("span",{className:"remove-org-x",onClick:()=>H(b),title:"Удалить",children:"×"})]}),e.jsx("input",{type:"number",min:"0",placeholder:"Количество",value:j.count,onChange:C=>L(b,"count",C.target.value)})]},b)),e.jsx("div",{className:"add-org-btn-wrapper",children:e.jsx("button",{type:"button",id:"add_button",className:"add-organization-btn",onClick:E,children:"+ Добавить категорию"})})]}),e.jsx("div",{className:"participant-total",children:e.jsxs("strong",{children:[" ИТОГО: ",i]})})]})},ts=({feedbackCollected:s,setFeedbackCollected:u,selectedFeedbackTypes:a,setSelectedFeedbackTypes:p,feedbackDescription:c,setFeedbackDescription:d})=>{const i=()=>{u(x=>!x)},l=x=>{p(t=>t.includes(x)?t.filter(o=>o!==x):[...t,x])},v=x=>{d(x.target.value)};return e.jsxs("section",{children:[e.jsx("h2",{children:"Обратная связь"}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:s,onChange:i}),"Обратная связь была собрана:"]}),s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"feedback-types",children:[e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:a.includes("Анкетирование"),onChange:()=>l("Анкетирование")}),"Анкетирование"]}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:a.includes("Опрос"),onChange:()=>l("Опрос")}),"Опрос"]}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:a.includes("Онлайн-опрос"),onChange:()=>l("Онлайн-опрос")}),"Онлайн-опрос"]}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:a.includes("Интервью"),onChange:()=>l("Интервью")}),"Интервью"]})]}),e.jsxs("div",{className:"feedback-description",children:[e.jsx("label",{htmlFor:"feedbackDescription",children:"Описание обратной связи:"}),e.jsx("textarea",{id:"feedbackDescription",name:"feedbackDescription",value:c,onChange:v,maxLength:200,placeholder:"Введите описание, не более 200 символов"})]})]})]})},as=()=>{const[s,u]=n.useState(!1),[a,p]=n.useState(""),[c,d]=n.useState(!1),[i,l]=n.useState({}),[v,x]=n.useState([]);Object.values(i);const[t,o]=n.useState([]),[r,D]=n.useState(""),[h,E]=n.useState([]),[L,H]=n.useState(!1),[j,b]=n.useState([]),[C,N]=n.useState(!1),[w,le]=n.useState([]),[J,re]=n.useState(""),[ce,ls]=n.useState(!1),[oe,rs]=n.useState(!1),[M,de]=n.useState(!1),[he,ue]=n.useState(""),[pe,V]=n.useState(0),[U,me]=n.useState(!1),[cs,os]=n.useState(""),[ds,hs]=n.useState(0),[us,ps]=n.useState(!1),[xe,je]=n.useState([{category:"",count:0}]),[ge,ve]=n.useState(""),[F,Z]=n.useState({schoolKids:0,students:0,registeredPersons:0,trudmigrants:0,workingYouth:0,unemployedYouth:0,migrantStudents:0,migrantChildrenInSchools:0,migrantChildrenHome:0,newSubjectsResidents:0,registeredSchoolKids:0,registeredYouth:0,returnedFromCombatZones:0,subcultureYouth:0,suicidalChildren:0}),be=g=>{V(parseInt(g.target.value)||0)},[_,P]=n.useState([]),[Ce,fe]=n.useState(""),Ne=()=>{P(g=>[...g,{label:"",count:0}])},Se=(g,k,S)=>{const f=[..._];f[g][k]=k==="count"?Number(S):S,P(f)},ke=g=>{P(k=>k.filter((S,f)=>f!==g))};n.useEffect(()=>{const g=Object.values(F).reduce((S,f)=>S+Number(f||0),0),k=_.reduce((S,f)=>S+Number(f.count||0),0);V(g+k)},[F,_]);const[G,ye]=n.useState(""),[De,ms]=n.useState(""),Fe=g=>{ye(g.target.value)},[O,W]=n.useState(""),[T,Q]=n.useState(""),[Y,X]=n.useState(""),[ee,qe]=n.useState(""),[R,we]=n.useState(""),[se,Ee]=n.useState(""),[_e,Te]=n.useState(""),[xs,js]=n.useState(!1),Ie=g=>{const{name:k,value:S}=g.target;Z(f=>({...f,[k]:parseInt(S)||0}))},[A,Le]=n.useState(!1),[ne,Pe]=n.useState({municipal:"",regional:"",grants:"",other:""}),[Oe,gs]=n.useState(""),te=async g=>{if(g.preventDefault(),!K){I.error("Пожалуйста, выберите тему","Ошибка");return}try{const m=await fetch("/api/ref/events/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(B)});if(!m.ok)throw new Error("Ошибка при создании события");const y=await m.text();I.success("Данные успешно сохранены!","Успех"),console.log("Событие создано:",y)}catch(m){console.error("Ошибка:",m),I.error("Произошла ошибка при создании события","Ошибка")}console.log("Topics:",He);let k=C?w:[],S=C?J:"",f=A?ne:{municipal:"",regional:"",grants:"",other:""},Be=A?Oe:"",Ke=c?i:{},Ve=M?a:"";const q=document.getElementById("event_date"),Ae=new Date(T),$e=new Date().getFullYear();if(Ae.getFullYear()!==$e){q==null||q.classList.add("error"),q==null||q.scrollIntoView({behavior:"smooth",block:"center"}),alert("Дата должна быть в пределах текущего года.");return}else q==null||q.classList.remove("error");g.preventDefault();let $=!1;[{value:O,id:"event_name"},{value:T,id:"event_date"},{value:Y,id:"event_description"},{value:R,id:"link"}].forEach(m=>{const y=document.getElementById(m.id);m.value.trim()?y.classList.remove("error"):(y.classList.add("error"),$=!0,y.scrollIntoView({behavior:"smooth",block:"center"}))});const ae=document.getElementById("link"),ie=R.split(",").map(m=>m.trim()).filter(m=>!/^(https?|http):\/\/[^\s$.?#].[^\s]*$/.test(m));if(ie.length>0&&(ae.classList.add("error"),ae.scrollIntoView({behavior:"smooth",block:"center"}),alert(`Некорректные ссылки: ${ie.join(", ")}`),$=!0),$){alert("Пожалуйста, заполните все обязательные поля и исправьте ошибки.");return}let B={name:O,content:Y,date:T,level:ee,form:se,themeCode:De,isBestPractice:oe,isValuable:ce,createMediaLinkRequest:{content:R.split(",").map(m=>m.trim())},createFinanceRequest:{MunicipalBudget:Number(f.municipal),RegionalBudget:Number(f.regional),GranteBudget:Number(f.grants),OtherBudget:Number(f.other),description:Be},createFeedBackRequest:{feedBackTypes:k,description:S},createInterAgencyCooperationRequest:{content:Ke},createParticipantsRequest:{students:Number(F.students),schoolKids:Number(F.schoolKids),registeredPersons:Number(F.registeredPersons),trudmigrants:Number(F.trudmigrants),workingYouth:Number(F.workingYouth),notWorkingYouth:Number(F.unemployedYouth),others:U&&_.length>0?_:null},createEqualToEqualRequest:{content:Ve}};alert(JSON.stringify(B,null,2)),console.log(B),console.log("---------------");const ze="/api/ref/events/create",[He,Je]=n.useState([]),[K,Cs]=n.useState("");n.useEffect(()=>{(async()=>{try{const z=await(await fetch("/api/ref/themes")).json();Je(z)}catch(y){console.error("Ошибка при получении тем:",y)}})()},[]),n.useEffect(()=>{K&&(async()=>{try{const z=await(await fetch(`/api/ref/subthemes?topic=${K}`)).json();E(z)}catch(y){console.error("Ошибка при получении подтем:",y)}})()},[K]);try{const m=await fetch(ze,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(B)});if(!m.ok)throw new Error("Ошибка при создании события");const y=await m.text();console.log("Событие создано:",y),I.success("Данные успешно сохранены и добавлены в таблицу!","Успех")}catch(m){console.error("Ошибка:",m)}},[Ye,Re]=n.useState("");return n.useEffect(()=>{(async()=>{try{const S=await(await fetch("/api/ref/themes")).json();console.log("Темы:",S),o(S)}catch(k){console.error("Ошибка при получении тем:",k)}})()},[]),e.jsx("div",{children:e.jsx("form",{onSubmit:te,children:e.jsxs("div",{children:[e.jsx("div",{className:"centered-container",id:"above-container",children:e.jsx("img",{src:"images/АТК.png",alt:"Символика АТК"})}),e.jsxs("div",{className:"container",children:[e.jsx("div",{id:"heraldry",children:e.jsx("img",{src:"images/hanty-mansijskogo.png",alt:"Герб Ханты-Мансийского автономного округа"})}),e.jsx("label",{htmlFor:"theme_select",children:"Создание формы по номеру темы"}),e.jsxs("select",{id:"theme_select",value:G,onChange:Fe,children:[e.jsx("option",{value:"none",children:"Выберите тему"}),e.jsx("option",{value:"1",children:"1.1.1, 1.2.1, 1.1.3, 1.2.1, 1.3.1.1, 1.3.1.2, 1.3.3.1, 1.3.3.2, 1.3.4, 1.5.1, 1.5.2, 2.2, 2.3, 2.4, 2.5, 2.6, 3.6, 4.1.1"}),e.jsx("option",{value:"2",children:"1.3.5"}),e.jsx("option",{value:"3",children:"1.4"}),e.jsx("option",{value:"4",children:"2.7.1"}),e.jsx("option",{value:"5",children:"2.7.2"}),e.jsx("option",{value:"6",children:"3.2.1 "}),e.jsx("option",{value:"7",children:"3.2.2 "}),e.jsx("option",{value:"8",children:"3.4.3 "}),e.jsx("option",{value:"9",children:"3.5 "}),e.jsx("option",{value:"10",children:"3.6 "}),e.jsx("option",{value:"11",children:"4.2 "})]}),G==="1"&&e.jsxs("div",{id:"form_theme_1",className:"form-block",children:[e.jsx("h1",{children:"Форма создания мероприятия"}),e.jsxs("form",{onSubmit:te,children:[e.jsx(Ze,{topics:t,selectedTopic:r,setSelectedTopic:D,description:Ye,setDescription:Re}),e.jsxs("section",{className:"form-section1",children:[e.jsx("h2",{children:"Основная информация о мероприятии"}),e.jsx(We,{eventName:O,setEventName:W,eventDate:T,setEventDate:Q,eventDescription:Y,setEventDescription:X,dateHasError:L}),e.jsx(Ge,{eventName:O,setEventName:W,eventDate:T,setEventDate:Q,eventDescription:Y,setEventDescription:X,level:ee,setLevel:qe,link:R,setLink:we,formConducted:se,setFormConducted:Ee,otherDescription:_e,setOtherDescription:Te}),e.jsx(Qe,{resultDescription:Ce,setResultDescription:fe,uprDescription:ge,setUprDescription:ve})]}),e.jsxs("section",{className:"form-section1",children:[e.jsx("h2",{children:"Дополнительная информация о мероприятии"}),e.jsx(ts,{feedbackCollected:C,setFeedbackCollected:N,selectedFeedbackTypes:w,setSelectedFeedbackTypes:le,feedbackDescription:J,setFeedbackDescription:re}),e.jsx(es,{hasFinancing:A,setHasFinancing:Le,financing:ne,setFinancing:Pe}),e.jsx(ns,{participantsCategories:xe,setParticipantsCategories:je,participants:F,setParticipants:Z,customParticipants:_,setCustomParticipants:P,detailedInput:U,setDetailedInput:me,totalParticipants:pe,setTotalParticipants:V,handleDetailedChange:Ie,handleTotalChange:be,handleAddParticipant:Ne,handleParticipantChange:Se,handleRemoveParticipant:ke}),e.jsx(Xe,{isCooperation:c,setIsCooperation:d,selectedOrganizations:i,setSelectedOrganizations:l,otherOrganizations:j,setOtherOrganizations:b}),e.jsx(ss,{equalFormat:M,setEqualFormat:de,equalFormatDescription:he,setEqualFormatDescription:ue})]}),e.jsx("button",{type:"submit",id:"save_button",children:"Сохранить"}),e.jsx("button",{type:"button",onClick:()=>I.success("Данные успешно сохранены и добавлены в таблицу","Успех"),children:"Показать Toastr"})]})]})]})]})})})},is=()=>{const[s,u]=n.useState(!1),a=()=>u(!s);return e.jsxs("div",{children:[e.jsx(Me,{isOpen:s,toggleSidebar:a}),e.jsx(as,{})]})};Ue.createRoot(document.getElementById("root")).render(e.jsx(n.StrictMode,{children:e.jsx(is,{})}));
