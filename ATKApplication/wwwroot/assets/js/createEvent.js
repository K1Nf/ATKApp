import{j as e,r as s,S as ks,c as Ns}from"./Sidebar-chunk.js";import{t as ee}from"./toastr.min-chunk.js";const Ds=({topics:t,selectedTopic:j,setSelectedTopic:n,description:p,setDescription:d,setFormType:u})=>{const r=i=>{const l=i.target.value;n(l);const h=t.find(c=>c.code===l);d(h?h.description:"");const o={"1.1.1":1,"1.1.2":1,"1.2.1":1,"1.1.3":1,"1.3.1.1":1,"1.3.1.2":1,"1.3.3.1":1,"1.3.3.2":1,"1.3.4":2,"1.3.5":3,"1.5.1":1,"1.5.2":1,"2.2":1,"2.3":1,"2.4":1,"2.5":1,"2.6":1,"3.6":1,"4.1.1":1}[l];u(o)};return e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"themeSelection",children:["Выбор темы",e.jsx("span",{style:{color:"red"},children:"*"}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"?"}),e.jsx("span",{className:"tooltiptext",children:"Это обязательное поле"})]})]}),e.jsxs("select",{id:"topic",name:"topic",value:j,onChange:r,children:[e.jsx("option",{value:"",children:"Выберите тему"}),t.length>0?t.map(i=>e.jsxs("option",{value:i.code,children:[i.code,"  "]},i.id)):e.jsx("option",{disabled:!0,children:"Темы не загружены"})]}),j&&p&&e.jsxs("div",{className:"description-container",children:[e.jsx("h3",{children:"Описание темы:"}),e.jsx("p",{children:p})]})]})},Ae=({link:t,setLink:j,level:n,setLevel:p,formConducted:d,setFormConducted:u,isOtherDescriptionVisible:r,setIsOtherDescriptionVisible:i,otherDescription:l,setOtherDescription:h,setLevelTitle:a,selectedTopic:o,levelTitle:c})=>{const b=C=>j(C.target.value),g=C=>p(C.target.value),T=C=>{const x=C.target.value;u(x),i(x==="other")},w=C=>h(C.target.value);return s.useEffect(()=>{a(o==="1.3.4"?"Уровень проекта":"Уровень мероприятия")},[o,a]),e.jsxs(e.Fragment,{children:[e.jsxs("section",{children:[e.jsxs("label",{htmlFor:"link",children:["Ссылка на СМИ/СМК",e.jsx("span",{className:"required",children:"*"}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"?"}),e.jsx("span",{className:"tooltiptext",children:"Это обязательное поле"})]})]}),e.jsx("input",{type:"text",id:"link",name:"link",value:t,onChange:b,maxLength:200,placeholder:"Введите одну или несколько ссылок через запятую, например: https://example1.com, https://example2.com",required:!0})]}),e.jsxs("section",{children:[e.jsxs("label",{htmlFor:"level",children:[c," ",e.jsx("span",{className:"required",children:"*"}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"?"}),e.jsx("span",{className:"tooltiptext",children:"Это обязательное поле"})]}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"!"}),e.jsx("span",{className:"tooltiptext",children:"Влияет на рейтинг"})]})]}),e.jsxs("select",{id:"level",name:"level",value:n,onChange:g,required:!0,children:[e.jsx("option",{value:"",children:"Выберите уровень"}),e.jsx("option",{value:"institution",children:"Учреждение"}),e.jsx("option",{value:"municipality",children:"Муниципалитет"}),e.jsx("option",{value:"intermunicipality",children:"Межмуниципитет"}),e.jsx("option",{value:"regional",children:"Региональный"}),e.jsx("option",{value:"interregional",children:"Межрегиональный"}),e.jsx("option",{value:"all_russian",children:"Всероссийский"}),e.jsx("option",{value:"international",children:"Международный"})]})]}),e.jsxs("section",{children:[e.jsxs("label",{htmlFor:"formConducted",children:["Форма проведения",e.jsx("span",{className:"required",children:"*"}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"?"}),e.jsx("span",{className:"tooltiptext",children:"Это обязательное поле"})]}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"!"}),e.jsx("span",{className:"tooltiptext",children:"Влияет на рейтинг"})]})]}),e.jsxs("select",{id:"formConducted",name:"formConducted",value:d,onChange:T,required:!0,children:[e.jsx("option",{value:"",children:"Выберите форму проведения"}),e.jsx("option",{value:"lecture",children:"Лекция"}),e.jsx("option",{value:"action",children:"Акция"}),e.jsx("option",{value:"quiz",children:"Квиз"}),e.jsx("option",{value:"quest",children:"Квест"}),e.jsx("option",{value:"game",children:"Игра"}),e.jsx("option",{value:"other",children:"Другое"})]}),r&&e.jsxs("div",{id:"otherDescriptionContainer",children:[e.jsx("label",{htmlFor:"otherDescription",children:"Описание:"}),e.jsx("textarea",{id:"otherDescription",name:"otherDescription",value:l,onChange:w,maxLength:300,placeholder:"Введите описание формы проведения, не более 300 символов",required:!0})]})]})]})},ge=({eventName:t,setEventName:j,eventDate:n,setEventDate:p,eventDescription:d,setEventDescription:u,dateHasError:r,selectedTopic:i,fieldTitle:l,setFieldTitle:h,descriptionTitle:a,setDescriptionTitle:o,namePlaceholder:c,setNamePlaceholder:b})=>{const g=C=>j(C.target.value),T=C=>p(C.target.value),w=C=>u(C.target.value);return s.useEffect(()=>{i==="1.3.4"?(h("Название проекта"),b("Введите название проекта"),o("Содержание антитеррористического модуля")):i==="1.3.5"?(h("Наименование материала"),b("Введите наименование материала"),o("Описание содержания материала антитеррористического модуля")):(h("Название мероприятия"),b("Введите название мероприятия"),o("Краткое описание мероприятия"))},[i,h,o,b]),e.jsxs(e.Fragment,{children:[e.jsxs("section",{children:[e.jsxs("label",{htmlFor:"event_name",children:[l," ",e.jsx("span",{className:"required",children:"*"}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"?"}),e.jsx("span",{className:"tooltiptext",children:"Это обязательное поле"})]})]}),e.jsx("input",{type:"text",id:"event_name",name:"event_name",value:t,onChange:g,placeholder:c,required:!0})]}),e.jsxs("section",{children:[e.jsxs("label",{htmlFor:"event_date",children:["Дата проведения",e.jsx("span",{className:"required",children:"*"}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"?"}),e.jsx("span",{className:"tooltiptext",children:"Это обязательное поле"})]})]}),e.jsx("input",{type:"date",id:"event_date",name:"event_date",value:n,onChange:T,min:`${new Date().getFullYear()}-01-01`,max:`${new Date().getFullYear()}-12-31`,className:r?"error":"",required:!0})]}),e.jsxs("section",{children:[e.jsxs("label",{htmlFor:"event_description",children:[a," ",e.jsx("span",{className:"required",children:"*"}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"?"}),e.jsx("span",{className:"tooltiptext",children:"Это обязательное поле"})]})]}),e.jsx("textarea",{id:"event_description",name:"event_description",value:d,onChange:w,maxLength:200,placeholder:"Введите описание, не более 200 символов",required:!0})]})]})},ys=({resultDescription:t,setResultDescription:j,uprDescription:n,setUprDescription:p})=>{const d=r=>j(r.target.value),u=r=>p(r.target.value);return e.jsxs(e.Fragment,{children:[e.jsxs("section",{children:[e.jsxs("label",{htmlFor:"resultDescription",children:["Результаты проведения",e.jsx("span",{className:"required",children:"*"}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"?"}),e.jsx("span",{className:"tooltiptext",children:"Это обязательное поле"})]})]}),e.jsx("textarea",{id:"resultDescription",name:"resultDescription",value:t,onChange:d,maxLength:200,placeholder:"Введите описание, не более 200 символов",required:!0})]}),e.jsxs("section",{children:[e.jsxs("label",{htmlFor:"uprDescription",children:["Необходимые управленческие решения",e.jsx("span",{className:"required",children:"*"}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"?"}),e.jsx("span",{className:"tooltiptext",children:"Это обязательное поле"})]})]}),e.jsx("textarea",{id:"uprDescription",name:"uprDescription",value:n,onChange:u,maxLength:200,placeholder:"Введите описание, не более 200 символов",required:!0})]})]})},Fs=({isCooperation:t,setIsCooperation:j,selectedOrganizations:n,setSelectedOrganizations:p,otherOrganizations:d,setOtherOrganizations:u})=>{const r=()=>{u(a=>[...a,{name:"",role:"",description:""}])},i=(a,o,c)=>{const b=[...d];b[a][o]=c,u(b)},l=a=>{u(o=>o.filter((c,b)=>b!==a))},h=a=>{p(o=>{const c={...o};return c[a]?delete c[a]:c[a]={role:"",description:""},c})};return e.jsxs("section",{children:[e.jsx("h2",{children:"Сотрудничество с другими организациями"}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:t,onChange:()=>j(!t)}),"Было сотрудничество с другими организациями",e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"!"}),e.jsx("span",{className:"tooltiptext",children:"Влияет на рейтинг"})]})]}),t&&e.jsxs(e.Fragment,{children:[["Аппарат АТК-ХМАО","Аппарат АТК-ОНСУ","СОНКО","ОМВД по ОНСУ","СВО","ЛОМЫ","Представители религиозных организаций традиционных для России конфессий"].map(a=>e.jsxs("div",{className:"organization-row",children:[e.jsxs("label",{className:"org-label",children:[a,e.jsx("input",{type:"checkbox",checked:!!n[a],onChange:()=>h(a),className:"org-checkbox"})]}),n[a]&&e.jsxs(e.Fragment,{children:[e.jsxs("select",{value:n[a].role,onChange:o=>p(c=>{var b;return{...c,[a]:{...c[a],role:o.target.value,description:o.target.value==="выступление"&&((b=c[a])==null?void 0:b.description)||""}}}),children:[e.jsx("option",{value:"",children:"Выберите роль"}),e.jsx("option",{value:"участие",children:"Принял участие"}),e.jsx("option",{value:"выступление",children:"Выступил"})]}),n[a].role==="выступление"&&e.jsx("textarea",{maxLength:200,placeholder:"Описание выступления",value:n[a].description,onChange:o=>p(c=>({...c,[a]:{...c[a],description:o.target.value}}))})]})]},a)),d.map((a,o)=>e.jsxs("div",{className:"organization-row",children:[e.jsxs("div",{className:"org-header",children:[e.jsx("input",{type:"text",placeholder:"Название организации",maxLength:50,value:a.name,onChange:c=>i(o,"name",c.target.value)}),e.jsx("span",{className:"remove-org-x",onClick:()=>l(o),children:"×"})]}),e.jsxs("select",{value:a.role,onChange:c=>i(o,"role",c.target.value),children:[e.jsx("option",{value:"",children:"Выберите роль"}),e.jsx("option",{value:"участие",children:"Принял участие"}),e.jsx("option",{value:"выступление",children:"Выступил"})]}),a.role==="выступление"&&e.jsx("textarea",{placeholder:"Описание выступления, не более 200 символов!",maxLength:200,value:a.description,onChange:c=>i(o,"description",c.target.value)})]},`custom-${o}`)),e.jsx("button",{id:"add_button",type:"button",className:"add-organization-btn",onClick:r,children:"+ Добавить организацию"})]})]})},Me=({financing:t,setFinancing:j,hasFinancing:n,setHasFinancing:p,financingOtherDescription:d,setFinancingOtherDescription:u})=>{const r=i=>{j({...t,[i.target.name]:i.target.value})};return e.jsxs("section",{children:[e.jsx("h2",{children:"Финансирование"}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:n,onChange:()=>p(!n)}),"Есть финансирование"]}),n&&e.jsxs("div",{className:"financing-details",children:[e.jsxs("div",{className:"financing-row",children:[e.jsxs("div",{className:"financing-field",children:[e.jsx("label",{children:"Муниципальный бюджет:"}),e.jsx("input",{type:"number",name:"municipal",placeholder:"0",min:"0",value:t.municipal,onChange:r})]}),e.jsxs("div",{className:"financing-field",children:[e.jsx("label",{children:"Окружной бюджет:"}),e.jsx("input",{type:"number",name:"regional",placeholder:"0",min:"0",value:t.regional,onChange:r})]})]}),e.jsxs("div",{className:"financing-row",children:[e.jsxs("div",{className:"financing-field",children:[e.jsx("label",{children:"Гранты/Субсидии:"}),e.jsx("input",{type:"number",name:"grants",placeholder:"0",min:"0",value:t.grants,onChange:r})]}),e.jsxs("div",{className:"financing-field",children:[e.jsx("label",{children:"Другое (сумма):"}),e.jsx("input",{type:"number",name:"other",placeholder:"0",min:"0",value:t.other,onChange:r})]})]}),t.other&&e.jsxs("div",{className:"other-details",children:[e.jsx("label",{children:"Описание источника финансирования:"}),e.jsx("textarea",{maxLength:200,placeholder:"Введите описание источника, не более 200 символов",value:d,onChange:i=>u(i.target.value)})]}),e.jsx("div",{className:"total-amount",children:e.jsxs("p",{children:["ИТОГО:"," ",e.jsx("span",{children:(Number(t.municipal)+Number(t.regional)+Number(t.grants)+Number(t.other)).toFixed(2)})]})})]})]})},Ye=({equalFormat:t,setEqualFormat:j,equalFormatDescription:n,setEqualFormatDescription:p,bestEvent:d,setBestEvent:u,importantEvent:r,setImportantEvent:i})=>{const l=()=>{j(!t)},h=()=>{u(!d)},a=()=>{i(!r)},o=c=>{p(c.target.value)};return e.jsxs("section",{children:[e.jsx("h2",{children:"Дополнительные характеристики"}),e.jsx("div",{className:"checkbox-container",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:r,onChange:a}),"Отметить, как значимое"]})}),e.jsx("div",{className:"checkbox-container",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:d,onChange:h}),"Включить в сборник лучших практик"]})}),e.jsxs("div",{className:"checkbox-container",children:[e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:t,onChange:l}),'Формат "равный равному"']}),e.jsxs("span",{className:"tooltip",children:[e.jsx("span",{className:"question-icon",children:"!"}),e.jsx("span",{className:"tooltiptext",children:"Влияет на рейтинг"})]})]}),t&&e.jsxs("div",{id:"peer_format_description",children:[e.jsx("label",{children:"Описание:"}),e.jsx("textarea",{value:n,onChange:o,maxLength:200,placeholder:"Введите описание формата 'равный равному', не более 200 символов"})]})]})},Be=({participants:t,setParticipants:j,detailedInput:n,setDetailedInput:p,customParticipants:d,setCustomParticipants:u,totalParticipants:r,setTotalParticipants:i})=>{const[l,h]=s.useState([{category:"",count:0}]),[a,o]=s.useState(!1),[c,b]=s.useState(!1),g=x=>{const{name:S,value:f}=x.target;j(k=>({...k,[S]:f}))},T=()=>{u(x=>[...x,{label:"",count:0}])},w=(x,S,f)=>{const k=[...d];k[x][S]=S==="count"?Number(f):f,u(k)},C=x=>{u(S=>S.filter((f,k)=>k!==x))};return s.useEffect(()=>{const x=Object.values(t).reduce((k,_)=>k+Number(_||0),0),S=d.reduce((k,_)=>k+Number(_.count||0),0),f=l.reduce((k,_)=>k+Number(_.count||0),0);i(x+S+f)},[t,d,l]),e.jsxs("section",{children:[e.jsx("h2",{children:"Количество участников"}),e.jsxs("label",{children:[n?"Категории участников":"Количество участников",!n&&e.jsx("input",{type:"number",min:0,value:r,onChange:x=>i(Number(x.target.value)),className:"simple-total-input",placeholder:"Введите количество"})]}),e.jsxs("label",{style:{marginTop:"10px",display:"block"},children:[e.jsx("input",{type:"checkbox",checked:n,onChange:x=>{p(x.target.checked),x.target.checked&&(i(0),u([]))}}),"Подробнее"]}),n&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"participants-row",children:[e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Школьники"}),e.jsx("input",{type:"number",min:"0",name:"schoolKids",value:t.schoolKids,onChange:g})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Студенты"}),e.jsx("input",{type:"number",min:"0",name:"students",value:t.students,onChange:g})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Состоящие на различных формах учёта"}),e.jsx("input",{type:"number",min:"0",name:"registeredPersons",value:t.registeredPersons,onChange:g})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Трудовые мигранты"}),e.jsx("input",{type:"number",min:"0",name:"trud-migrants",value:t.trudmigrants,onChange:g})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Работающая молодёжь"}),e.jsx("input",{type:"number",min:"0",name:"workingYouth",value:t.workingYouth,onChange:g})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Не работающая молодёжь"}),e.jsx("input",{type:"number",min:"0",name:"unemployedYouth",value:t.unemployedYouth,onChange:g})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Мигранты-студенты"}),e.jsx("input",{type:"number",min:"0",name:"migrantStudents",value:t.migrantStudents,onChange:g})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Дети мигрантов (в ОУ)"}),e.jsx("input",{type:"number",min:"0",name:"migrantChildrenInSchools",value:t.migrantChildrenInSchools,onChange:g})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Дети мигрантов (дом. обучение)"}),e.jsx("input",{type:"number",min:"0",name:"migrantChildrenHome",value:t.migrantChildrenHome,onChange:g})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Жители новых субъектов РФ"}),e.jsx("input",{type:"number",min:"0",name:"newSubjectsResidents",value:t.newSubjectsResidents,onChange:g})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Школьники на учёте"}),e.jsx("input",{type:"number",min:"0",name:"registeredSchoolKids",value:t.registeredSchoolKids,onChange:g})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Молодёжь на учёте"}),e.jsx("input",{type:"number",min:"0",name:"registeredYouth",value:t.registeredYouth,onChange:g})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Возвратившиеся из зон БД"}),e.jsx("input",{type:"number",min:"0",name:"returnedFromCombatZones",value:t.returnedFromCombatZones,onChange:g})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Субкультуры, склонные к насилию"}),e.jsx("input",{type:"number",min:"0",name:"subcultureYouth",value:t.subcultureYouth,onChange:g})]}),e.jsxs("div",{className:"participant-field",children:[e.jsx("label",{children:"Дети/школьники с суиц. наклонностями"}),e.jsx("input",{type:"number",min:"0",name:"suicidalChildren",value:t.suicidalChildren,onChange:g})]})]})}),n&&e.jsxs("section",{className:"form-section",children:[d.map((x,S)=>e.jsxs("div",{className:"organization-row",children:[e.jsxs("div",{className:"org-header",children:[e.jsx("input",{type:"text",placeholder:"Категория участников, пишите внимательно, без ошибок, с большой буквы!",maxLength:50,value:x.label,spellCheck:!0,onChange:f=>w(S,"label",f.target.value)}),e.jsx("span",{className:"remove-org-x",onClick:()=>C(S),title:"Удалить",children:"×"})]}),e.jsx("input",{type:"number",min:"0",placeholder:"Количество",value:x.count,onChange:f=>w(S,"count",f.target.value)})]},S)),e.jsx("div",{className:"add-org-btn-wrapper",children:e.jsx("button",{type:"button",id:"add_button",className:"add-organization-btn",onClick:T,children:"+ Добавить категорию"})})]}),e.jsx("div",{className:"participant-total",children:e.jsxs("strong",{children:[" ИТОГО: ",r]})})]})},Is=({feedbackCollected:t,setFeedbackCollected:j,selectedFeedbackTypes:n,setSelectedFeedbackTypes:p,feedbackDescription:d,setFeedbackDescription:u})=>{const r=()=>{j(h=>!h)},i=h=>{p(a=>a.includes(h)?a.filter(o=>o!==h):[...a,h])},l=h=>{u(h.target.value)};return e.jsxs("section",{children:[e.jsx("h2",{children:"Обратная связь"}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:t,onChange:r}),"Обратная связь была собрана:"]}),t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"feedback-types",children:[e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:n.includes("Анкетирование"),onChange:()=>i("Анкетирование")}),"Анкетирование"]}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:n.includes("Опрос"),onChange:()=>i("Опрос")}),"Опрос"]}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:n.includes("Онлайн-опрос"),onChange:()=>i("Онлайн-опрос")}),"Онлайн-опрос"]}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:n.includes("Интервью"),onChange:()=>i("Интервью")}),"Интервью"]})]}),e.jsxs("div",{className:"feedback-description",children:[e.jsx("label",{htmlFor:"feedbackDescription",children:"Описание обратной связи:"}),e.jsx("textarea",{id:"feedbackDescription",name:"feedbackDescription",value:d,onChange:l,maxLength:200,placeholder:"Введите описание, не более 200 символов"})]})]})]})},qs=({})=>{const[t,j]=s.useState({info:!1,method:!1,org:!1,other:!1,financing:!1,competition:!1}),[n,p]=s.useState({infoDescription:"",methodDescription:"",orgDescription:"",otherDescription:"",competitionDescription:"",winnerDetails:""}),[d,u]=s.useState(""),r=l=>{j(h=>({...h,[l]:!h[l]}))},i=(l,h)=>{p(a=>({...a,[l]:h}))};return e.jsxs("div",{children:[e.jsxs("section",{children:[e.jsx("h2",{children:"Поддержка проекта"}),e.jsxs("div",{children:[e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:t.info,onChange:()=>r("info")}),"Информационная поддержка"]}),t.info&&e.jsx("textarea",{maxLength:200,placeholder:"Описание информационной поддержки проекта (не более 200 символов)",value:n.infoDescription,onChange:l=>i("infoDescription",l.target.value)})]}),e.jsxs("div",{children:[e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:t.method,onChange:()=>r("method")}),"Методическая поддержка"]}),t.method&&e.jsx("textarea",{maxLength:200,placeholder:"Описание методической поддержки проекта (не более 200 символов)",value:n.methodDescription,onChange:l=>i("methodDescription",l.target.value)})]}),e.jsxs("div",{children:[e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:t.org,onChange:()=>r("org")}),"Организационная поддержка"]}),t.org&&e.jsx("textarea",{maxLength:200,placeholder:"Описание организационной поддержки проекта (не более 200 символов)",value:n.orgDescription,onChange:l=>i("orgDescription",l.target.value)})]}),e.jsxs("div",{children:[e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:t.financing,onChange:()=>r("financing")}),"Финансовая поддержка"]}),t.financing&&e.jsx(Me,{financing:n.financing,setFinancing:i,hasFinancing:t.financing,setHasFinancing:()=>r("financing"),financingOtherDescription:n.financingOtherDescription,setFinancingOtherDescription:l=>i("financingOtherDescription",l)})]}),e.jsxs("div",{children:[e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:t.other,onChange:()=>r("other")}),"Другое"]}),t.other&&e.jsx("textarea",{maxLength:200,placeholder:"Описание других видов поддержки проекта (не более 200 символов)",value:n.otherDescription,onChange:l=>i("otherDescription",l.target.value)})]})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"Направление проекта для участия в конкурсах"}),e.jsxs("div",{children:[e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:t.competition,onChange:()=>r("competition")}),"Направление проекта для участия в конкурсах"]}),t.competition&&e.jsxs("div",{children:[e.jsx("textarea",{maxLength:200,placeholder:"Описание конкурса (не более 200 символов)",value:n.competitionDescription,onChange:l=>i("competitionDescription",l.target.value)}),e.jsxs("select",{value:d,onChange:l=>u(l.target.value),children:[e.jsx("option",{value:"",children:"Результаты участия"}),e.jsx("option",{value:"participant",children:"Участник конкурса"}),e.jsx("option",{value:"winner",children:"Призер или победитель"})]}),d==="winner"&&e.jsx("textarea",{maxLength:200,placeholder:"Укажите, например, название наград или вид документа (диплома, грамоты), какой степени и т.д.",value:n.winnerDetails,onChange:l=>i("winnerDetails",l.target.value)})]})]})]})]})},ws=({})=>{const[t,j]=s.useState(!1),[n,p]=s.useState([]),[d,u]=s.useState(!1),[r,i]=s.useState(!1),[l,h]=s.useState(""),[a,o]=s.useState(""),[c,b]=s.useState(!1),[g,T]=s.useState(""),[w,C]=s.useState(""),[x,S]=s.useState(!1),[f,k]=s.useState(""),[_,se]=s.useState(""),[K,te]=s.useState(!1),[ne,ve]=s.useState(""),B=(m,y,O)=>{const P=[...n];P[m][y]=O,p(P)},be=()=>{p([...n,{name:"",description:"",result:"",docDescription:"",isOpen:!0}]),u(!0)},M=m=>{const y=n.filter((O,P)=>P!==m);p(y)},[U,W]=s.useState(!1),J=()=>{W(!U)};return e.jsxs("div",{children:[e.jsx("section",{children:e.jsxs("div",{children:[e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:t,onChange:()=>j(!t)}),"Согласование материала"]}),t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:r,onChange:()=>i(!r)}),"С аппаратом АТК ОМСУ"]}),r&&e.jsxs("div",{children:[e.jsxs("select",{value:l,onChange:m=>h(m.target.value),children:[e.jsx("option",{value:"",children:"Результат"}),e.jsx("option",{value:"rejected",children:"Отказано"}),e.jsx("option",{value:"approved",children:"Утверждено"})]}),l==="approved"&&e.jsx("textarea",{value:a,onChange:m=>o(m.target.value),placeholder:"Номер и название утверждающего документа",maxLength:100})]})]}),e.jsxs("div",{children:[e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:c,onChange:()=>b(!c)}),"С аппаратом АТК ХМАО"]}),c&&e.jsxs("div",{children:[e.jsxs("select",{value:g,onChange:m=>T(m.target.value),children:[e.jsx("option",{value:"",children:"Результат"}),e.jsx("option",{value:"rejected",children:"Отказано"}),e.jsx("option",{value:"approved",children:"Утверждено"})]}),g==="approved"&&e.jsx("textarea",{value:w,onChange:m=>C(m.target.value),placeholder:"Номер и название утверждающего документа",maxLength:100})]})]}),e.jsxs("div",{children:[e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:x,onChange:()=>S(!x)}),"С экспертным советом при АТК ХМАО-Югры"]}),x&&e.jsxs("div",{children:[e.jsxs("select",{value:f,onChange:m=>k(m.target.value),children:[e.jsx("option",{value:"",children:"Результат"}),e.jsx("option",{value:"rejected",children:"Отказано"}),e.jsx("option",{value:"approved",children:"Утверждено"})]}),f==="approved"&&e.jsx("textarea",{value:_,onChange:m=>se(m.target.value),placeholder:"Номер и название утверждающего документа",maxLength:100})]})]}),e.jsxs("div",{children:[e.jsx("button",{id:"add_button",type:"button",className:"add-organization-btn",onClick:be,children:"+ Добавить организацию"}),d&&n.map((m,y)=>m.isOpen&&e.jsxs("div",{children:[e.jsxs("div",{className:"org-header",children:[e.jsx("input",{type:"text",placeholder:"Название категории",value:m.name,onChange:O=>B(y,"name",O.target.value)}),e.jsx("span",{className:"remove-org-x",onClick:()=>M(y),children:"×"})]}),e.jsxs("select",{value:m.result,onChange:O=>B(y,"result",O.target.value),children:[e.jsx("option",{value:"",children:"Результат"}),e.jsx("option",{value:"rejected",children:"Отказано"}),e.jsx("option",{value:"approved",children:"Утверждено"})]}),m.result==="approved"&&e.jsx("textarea",{placeholder:"№ и название документа утверждающего методический материал",maxLength:100,value:m.docDescription,onChange:O=>B(y,"docDescription",O.target.value)})]},y))]})]})]})}),e.jsx("section",{children:e.jsxs("div",{children:[e.jsx("h2",{children:"Использование в работе"}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:K,onChange:()=>te(!K)}),"Направлена субъектам противодействующим идеологии для использования в работе"]}),K&&e.jsx("div",{children:e.jsx("textarea",{value:ne,onChange:m=>ve(m.target.value),placeholder:"Кому и № исходящего документа",maxLength:100})})]})}),e.jsx("section",{children:e.jsxs("div",{children:[e.jsx("h2",{children:"Дополнительные характеристики"}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:U,onChange:J}),"Направлено в НАК"]})]})})]})},Os=()=>{const[t,j]=s.useState(!1),[n,p]=s.useState(""),[d,u]=s.useState(!1),[r,i]=s.useState({}),[l,h]=s.useState([]);Object.values(r);const[a,o]=s.useState([]),[c,b]=s.useState(""),[g,T]=s.useState([]),[w,C]=s.useState(!1),[x,S]=s.useState([]),[f,k]=s.useState(!1),[_,se]=s.useState([]),[K,te]=s.useState(""),[ne,ve]=s.useState(!1),[B,be]=s.useState(!1),[M,U]=s.useState(!1),[W,J]=s.useState(""),[m,y]=s.useState(0),[O,P]=s.useState(!1),[Es,Ts]=s.useState(""),[Ls,Ps]=s.useState(0),[Rs,Ks]=s.useState(!1),[Ce,fe]=s.useState([{category:"",count:0}]),[Ue,ze]=s.useState(""),[E,ae]=s.useState({schoolKids:0,students:0,registeredPersons:0,trudmigrants:0,workingYouth:0,unemployedYouth:0,migrantStudents:0,migrantChildrenInSchools:0,migrantChildrenHome:0,newSubjectsResidents:0,registeredSchoolKids:0,registeredYouth:0,returnedFromCombatZones:0,subcultureYouth:0,suicidalChildren:0}),Se=N=>{y(parseInt(N.target.value)||0)},[R,z]=s.useState([]),[Ve,He]=s.useState(""),ke=()=>{z(N=>[...N,{label:"",count:0}])},Ne=(N,I,F)=>{const D=[...R];D[N][I]=I==="count"?Number(F):F,z(D)},De=N=>{z(I=>I.filter((F,D)=>D!==N))};s.useEffect(()=>{const N=Object.values(E).reduce((F,D)=>F+Number(D||0),0),I=R.reduce((F,D)=>F+Number(D.count||0),0);y(N+I)},[E,R]);const[As,Ys]=s.useState(""),[$e,Bs]=s.useState(""),[V,ie]=s.useState(""),[We,Ms]=s.useState(""),[A,ce]=s.useState(""),[H,le]=s.useState(""),[Us,zs]=s.useState(""),[re,ye]=s.useState(""),[$,Fe]=s.useState(""),[oe,Ie]=s.useState(""),[qe,we]=s.useState(""),[Vs,Hs]=s.useState(!1),Oe=N=>{const{name:I,value:F}=N.target;ae(D=>({...D,[I]:parseInt(F)||0}))},[Z,_e]=s.useState(!1),[de,Ee]=s.useState({municipal:"",regional:"",grants:"",other:""}),[Te,Je]=s.useState(""),G=async N=>{if(N.preventDefault(),!c){ee.error("Пожалуйста, выберите тему","Ошибка");return}try{const v=await fetch("/api/ref/events/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)});if(!v.ok)throw new Error("Ошибка при создании события");const q=await v.text();ee.success("Данные успешно сохранены!","Успех"),console.log("Событие создано:",q)}catch(v){console.error("Ошибка:",v),ee.error("Произошла ошибка при создании события","Ошибка")}console.log("Topics:",fs);let I=f?_:[],F=f?K:"",D=Z?de:{municipal:"",regional:"",grants:"",other:""},ms=Z?Te:"",js=d?r:{},gs=M?n:"";const L=document.getElementById("event_date"),vs=new Date(A),bs=new Date().getFullYear();if(vs.getFullYear()!==bs){L==null||L.classList.add("error"),L==null||L.scrollIntoView({behavior:"smooth",block:"center"}),alert("Дата должна быть в пределах текущего года.");return}else L==null||L.classList.remove("error");N.preventDefault();let me=!1;[{value:V,id:"event_name"},{value:We,id:"event_name"},{value:A,id:"event_date"},{value:H,id:"event_description"},{value:$,id:"link"}].forEach(v=>{const q=document.getElementById(v.id);v.value.trim()?q.classList.remove("error"):(q.classList.add("error"),me=!0,q.scrollIntoView({behavior:"smooth",block:"center"}))});const Re=document.getElementById("link"),Ke=$.split(",").map(v=>v.trim()).filter(v=>!/^(https?|http):\/\/[^\s$.?#].[^\s]*$/.test(v));if(Ke.length>0&&(Re.classList.add("error"),Re.scrollIntoView({behavior:"smooth",block:"center"}),alert(`Некорректные ссылки: ${Ke.join(", ")}`),me=!0),me){alert("Пожалуйста, заполните все обязательные поля и исправьте ошибки.");return}let X={name:V,content:H,date:A,level:re,form:oe,themeCode:$e,isBestPractice:B,isValuable:ne,createMediaLinkRequest:{content:$.split(",").map(v=>v.trim())},createFinanceRequest:{MunicipalBudget:Number(D.municipal),RegionalBudget:Number(D.regional),GranteBudget:Number(D.grants),OtherBudget:Number(D.other),description:ms},createFeedBackRequest:{feedBackTypes:I,description:F},createInterAgencyCooperationRequest:{content:js},createParticipantsRequest:{students:Number(E.students),schoolKids:Number(E.schoolKids),registeredPersons:Number(E.registeredPersons),trudmigrants:Number(E.trudmigrants),workingYouth:Number(E.workingYouth),notWorkingYouth:Number(E.unemployedYouth),others:O&&R.length>0?R:null},createEqualToEqualRequest:{content:gs}};alert(JSON.stringify(X,null,2)),console.log(X),console.log("---------------");const Cs="/api/ref/events/create",[fs,Ss]=s.useState([]);s.useEffect(()=>{(async()=>{try{const je=await(await fetch("/api/ref/themes")).json();Ss(je)}catch(q){console.error("Ошибка при получении тем:",q)}})()},[]),s.useEffect(()=>{c&&(async()=>{try{const je=await(await fetch(`/api/ref/subthemes?topic=${c}`)).json();T(je)}catch(q){console.error("Ошибка при получении подтем:",q)}})()},[c]);try{const v=await fetch(Cs,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)});if(!v.ok)throw new Error("Ошибка при создании события");const q=await v.text();console.log("Событие создано:",q),ee.success("Данные успешно сохранены и добавлены в таблицу!","Успех")}catch(v){console.error("Ошибка:",v)}},[Ze,Ge]=s.useState("");s.useEffect(()=>{(async()=>{try{const F=await(await fetch("/api/ref/themes")).json();console.log("Темы:",F),o(F)}catch(I){console.error("Ошибка при получении тем:",I)}})()},[]);const[he,ue]=s.useState("Название мероприятия"),[pe,xe]=s.useState("Краткое описание мероприятия"),[Le,Pe]=s.useState("Уровень мероприятия"),[Q,Qe]=s.useState(null),[$s,Ws]=s.useState(!1),[Js,Zs]=s.useState(!1),[Gs,Qs]=s.useState(!1),[Xs,et]=s.useState(!1),[st,tt]=s.useState(!1),[nt,Y]=s.useState("Введите название мероприятия"),[Xe,es]=s.useState(!1),[ss,ts]=s.useState(!1),[ns,as]=s.useState(!1),[is,cs]=s.useState(!1),[ls,rs]=s.useState(!1),[os,ds]=s.useState(""),[hs,us]=s.useState(""),[ps,xs]=s.useState("");return e.jsx("div",{children:e.jsx("form",{onSubmit:G,children:e.jsxs("div",{children:[e.jsx("div",{className:"centered-container",id:"above-container",children:e.jsx("img",{src:"images/АТК.png",alt:"Символика АТК"})}),e.jsxs("div",{className:"container",children:[e.jsx("div",{id:"heraldry",children:e.jsx("img",{src:"images/hanty-mansijskogo.png",alt:"Герб Ханты-Мансийского автономного округа"})}),e.jsx("label",{htmlFor:"theme_select",children:"Создание формы по номеру темы"}),e.jsx(Ds,{topics:a,selectedTopic:c,setSelectedTopic:b,description:Ze,setDescription:Ge,setFormType:Qe}),Q===1&&e.jsxs("div",{id:"form_theme_1",className:"form-block",children:[e.jsx("h1",{children:"Форма создания мероприятия"}),e.jsxs("form",{onSubmit:G,children:[e.jsxs("section",{className:"form-section1",children:[e.jsx("h2",{children:"Основная информация о мероприятии"}),e.jsx(ge,{eventName:V,setEventName:ie,eventDate:A,setEventDate:ce,eventDescription:H,setEventDescription:le,dateHasError:w,selectedTopic:c,fieldTitle:he,setFieldTitle:ue,namePlaceholder:Y,setNamePlaceholder:Y,descriptionTitle:pe,setDescriptionTitle:xe}),e.jsx(Ae,{level:re,setLevel:ye,link:$,setLink:Fe,formConducted:oe,setFormConducted:Ie,otherDescription:qe,setOtherDescription:we,setLevelTitle:Pe,selectedTopic:c,levelTitle:Le}),e.jsx(ys,{resultDescription:Ve,setResultDescription:He,uprDescription:Ue,setUprDescription:ze})]}),e.jsxs("section",{className:"form-section1",children:[e.jsx("h2",{children:"Дополнительная информация о мероприятии"}),e.jsx(Is,{feedbackCollected:f,setFeedbackCollected:k,selectedFeedbackTypes:_,setSelectedFeedbackTypes:se,feedbackDescription:K,setFeedbackDescription:te}),e.jsx(Me,{hasFinancing:Z,setHasFinancing:_e,financing:de,setFinancing:Ee}),e.jsx(Be,{participantsCategories:Ce,setParticipantsCategories:fe,participants:E,setParticipants:ae,customParticipants:R,setCustomParticipants:z,detailedInput:O,setDetailedInput:P,totalParticipants:m,setTotalParticipants:y,handleDetailedChange:Oe,handleTotalChange:Se,handleAddParticipant:ke,handleParticipantChange:Ne,handleRemoveParticipant:De}),e.jsx(Fs,{isCooperation:d,setIsCooperation:u,selectedOrganizations:r,setSelectedOrganizations:i,otherOrganizations:x,setOtherOrganizations:S}),e.jsx(Ye,{equalFormat:M,setEqualFormat:U,equalFormatDescription:W,setEqualFormatDescription:J})]})]})]}),Q===2&&e.jsxs("div",{id:"form_theme_1",className:"form-block",children:[e.jsx("h1",{children:"Форма создания мероприятия"}),e.jsxs("form",{onSubmit:G,children:[e.jsxs("section",{className:"form-section1",children:[e.jsx("h2",{children:"Основная информация о мероприятии"}),e.jsx(ge,{eventName:V,setEventName:ie,eventDate:A,setEventDate:ce,eventDescription:H,setEventDescription:le,dateHasError:w,selectedTopic:c,fieldTitle:he,setFieldTitle:ue,namePlaceholder:Y,setNamePlaceholder:Y,descriptionTitle:pe,setDescriptionTitle:xe}),e.jsx(Ae,{level:re,setLevel:ye,link:$,setLink:Fe,formConducted:oe,setFormConducted:Ie,otherDescription:qe,setOtherDescription:we,setLevelTitle:Pe,selectedTopic:c,levelTitle:Le})]}),e.jsxs("section",{className:"form-section1",children:[e.jsx("h2",{children:"Дополнительная информация о мероприятии"}),e.jsx(qs,{isInfoChecked:Xe,setIsInfoChecked:es,isMethodChecked:ss,setIsMethodChecked:ts,isOrgChecked:ns,setIsOrgChecked:as,isOtherChecked:is,setIsOtherChecked:cs,isCompetitionDirectionChecked:ls,setIsCompetitionDirectionChecked:rs,competitionDescription:os,setCompetitionDescription:ds,participationResult:hs,setParticipationResult:us,winnerDetails:ps,setWinnerDetails:xs}),e.jsx(Be,{participantsCategories:Ce,setParticipantsCategories:fe,participants:E,setParticipants:ae,customParticipants:R,setCustomParticipants:z,detailedInput:O,setDetailedInput:P,totalParticipants:m,setTotalParticipants:y,handleDetailedChange:Oe,handleTotalChange:Se,handleAddParticipant:ke,handleParticipantChange:Ne,handleRemoveParticipant:De}),e.jsx(Ye,{equalFormat:M,setEqualFormat:U,equalFormatDescription:W,setEqualFormatDescription:J})]})]})]}),Q===3&&e.jsxs("div",{id:"form_theme_1",className:"form-block",children:[e.jsx("h1",{children:"Форма создания мероприятия"}),e.jsxs("form",{onSubmit:G,children:[e.jsxs("section",{className:"form-section1",children:[e.jsx("h2",{children:"Основная информация о мероприятии"}),e.jsx(ge,{eventName:V,setEventName:ie,eventDate:A,setEventDate:ce,eventDescription:H,setEventDescription:le,dateHasError:w,selectedTopic:c,fieldTitle:he,setFieldTitle:ue,namePlaceholder:Y,setNamePlaceholder:Y,descriptionTitle:pe,setDescriptionTitle:xe})]}),e.jsxs("section",{className:"form-section1",children:[e.jsx("h2",{children:"Дополнительная информация о мероприятии"}),e.jsx("h2",{children:"Согласование учебного материала"}),e.jsx(ws,{financing:de,setFinancing:Ee,hasFinancing:Z,setHasFinancing:_e,financingOtherDescription:Te,setFinancingOtherDescription:Je})]})]})]}),Q&&e.jsx("button",{type:"submit",id:"save_button",children:"Сохранить"})]})]})})})},_s=()=>{const[t,j]=s.useState(!1),n=()=>j(!t);return e.jsxs("div",{children:[e.jsx(ks,{isOpen:t,toggleSidebar:n}),e.jsx(Os,{})]})};Ns.createRoot(document.getElementById("root")).render(e.jsx(s.StrictMode,{children:e.jsx(_s,{})}));
